/*
 * $Id: fff8b28c8641ba353008abd7a59237bbf4be32a6 $
 * 
 * $Copyright: Copyright 2012 Broadcom Corporation.
 * This program is the proprietary software of Broadcom Corporation
 * and/or its licensors, and may only be used, duplicated, modified
 * or distributed pursuant to the terms and conditions of a separate,
 * written license agreement executed between you and Broadcom
 * (an "Authorized License").  Except as set forth in an Authorized
 * License, Broadcom grants no license (express or implied), right
 * to use, or waiver of any kind with respect to the Software, and
 * Broadcom expressly reserves all rights in and to the Software
 * and all intellectual property rights therein.  IF YOU HAVE
 * NO AUTHORIZED LICENSE, THEN YOU HAVE NO RIGHT TO USE THIS SOFTWARE
 * IN ANY WAY, AND SHOULD IMMEDIATELY NOTIFY BROADCOM AND DISCONTINUE
 * ALL USE OF THE SOFTWARE.  
 *  
 * Except as expressly set forth in the Authorized License,
 *  
 * 1.     This program, including its structure, sequence and organization,
 * constitutes the valuable trade secrets of Broadcom, and you shall use
 * all reasonable efforts to protect the confidentiality thereof,
 * and to use this information only in connection with your use of
 * Broadcom integrated circuit products.
 *  
 * 2.     TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE SOFTWARE IS
 * PROVIDED "AS IS" AND WITH ALL FAULTS AND BROADCOM MAKES NO PROMISES,
 * REPRESENTATIONS OR WARRANTIES, EITHER EXPRESS, IMPLIED, STATUTORY,
 * OR OTHERWISE, WITH RESPECT TO THE SOFTWARE.  BROADCOM SPECIFICALLY
 * DISCLAIMS ANY AND ALL IMPLIED WARRANTIES OF TITLE, MERCHANTABILITY,
 * NONINFRINGEMENT, FITNESS FOR A PARTICULAR PURPOSE, LACK OF VIRUSES,
 * ACCURACY OR COMPLETENESS, QUIET ENJOYMENT, QUIET POSSESSION OR
 * CORRESPONDENCE TO DESCRIPTION. YOU ASSUME THE ENTIRE RISK ARISING
 * OUT OF USE OR PERFORMANCE OF THE SOFTWARE.
 * 
 * 3.     TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL
 * BROADCOM OR ITS LICENSORS BE LIABLE FOR (i) CONSEQUENTIAL,
 * INCIDENTAL, SPECIAL, INDIRECT, OR EXEMPLARY DAMAGES WHATSOEVER
 * ARISING OUT OF OR IN ANY WAY RELATING TO YOUR USE OF OR INABILITY
 * TO USE THE SOFTWARE EVEN IF BROADCOM HAS BEEN ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGES; OR (ii) ANY AMOUNT IN EXCESS OF
 * THE AMOUNT ACTUALLY PAID FOR THE SOFTWARE ITSELF OR USD 1.00,
 * WHICHEVER IS GREATER. THESE LIMITATIONS SHALL APPLY NOTWITHSTANDING
 * ANY FAILURE OF ESSENTIAL PURPOSE OF ANY LIMITED REMEDY.$
 * 
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 */

#ifndef __BCM_COSQ_H__
#define __BCM_COSQ_H__

#include <bcm/types.h>
#include <bcm/fabric.h>
#include <bcm/field.h>
#include <bcm/switch.h>

#ifndef BCM_HIDE_DISPATCHABLE

/* Initialize the COSQ subsystem. */
extern int bcm_cosq_init(
    int unit);

/* De-initialize the COSQ subsystem. */
extern int bcm_cosq_detach(
    int unit);

/* Configure the number of Class of Service Queues (COSQs). */
extern int bcm_cosq_config_set(
    int unit, 
    int numq);

/* Configure the number of Class of Service Queues (COSQs). */
extern int bcm_cosq_config_get(
    int unit, 
    int *numq);

/* Set the mapping from internal priority to COS queue. */
extern int bcm_cosq_mapping_set(
    int unit, 
    bcm_cos_t priority, 
    bcm_cos_queue_t cosq);

/* Get the mapping from internal priority to COS queue. */
extern int bcm_cosq_mapping_get(
    int unit, 
    bcm_cos_t priority, 
    bcm_cos_queue_t *cosq);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Config parameters for Priority flow control */
typedef struct bcm_cosq_pfc_config_s {
    int xoff_threshold;     /* Assert backpressure when number of buffers used
                               is at or above this threshold. */
    int xon_threshold;      /* Remove backpressure when number of buffers used
                               drops below this threshold. */
    int xoff_threshold_bd;  /* Assert backpressure when number of buffer
                               descriptors used is at or above this threshold. */
    int xon_threshold_bd;   /* Remove backpressure when number of buffer
                               descriptors used drops below this threshold. */
    int drop_threshold;     /* Drop packets when number of buffers used hit this
                               threshold. */
    int reserved_buffers;   /* Number of buffers reserved for the specified
                               priority group. */
    int lossless;           /* lossless PFC enable for the specified priority
                               group. */
} bcm_cosq_pfc_config_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* Set the buffer pool allocation scheme for PFC (priority flow control). */
extern int bcm_cosq_pfc_config_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_pfc_config_t *config);

/* Get the buffer pool allocation scheme for PFC (priority flow control). */
extern int bcm_cosq_pfc_config_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_pfc_config_t *config);

/* Set the mapping from internal priority to COS queue. */
extern int bcm_cosq_port_mapping_set(
    int unit, 
    bcm_port_t port, 
    bcm_cos_t priority, 
    bcm_cos_queue_t cosq);

/* Get the mapping from internal priority to COS queue. */
extern int bcm_cosq_port_mapping_get(
    int unit, 
    bcm_port_t port, 
    bcm_cos_t priority, 
    bcm_cos_queue_t *cosq);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Class of Service policies. */
#define BCM_COSQ_NONE                       0x0        /* Pass through. */
#define BCM_COSQ_STRICT                     0x01       /* Weights are ignored. */
#define BCM_COSQ_ROUND_ROBIN                0x02       /* Weights are ignored. */
#define BCM_COSQ_WEIGHTED_ROUND_ROBIN       0x03       
#define BCM_COSQ_WEIGHTED_FAIR_QUEUING      0x04       
#define BCM_COSQ_DEFICIT_ROUND_ROBIN        0x05       /* XGS3 only. */
#define BCM_COSQ_BOUNDED_DELAY              0x06       /* Strata only. */
#define BCM_COSQ_SP                         BCM_COSQ_STRICT /* Strict priority. */
#define BCM_COSQ_EF                         0x07       /* Expedited forwarding. */
#define BCM_COSQ_AF                         0x08       /* Assured forwarding. */
#define BCM_COSQ_SP_GLOBAL                  0x09       
#define BCM_COSQ_BE                         0x0A       /* Best effort. */
#define BCM_COSQ_CALENDAR                   0x0B       /* Calendar based
                                                          scheduling discipline. */
#define BCM_COSQ_SP0                        0x0C       /* Strict priority level
                                                          0. */
#define BCM_COSQ_SP1                        0x0D       /* Strict priority level
                                                          1. */
#define BCM_COSQ_SP2                        0x0E       /* Strict priority level
                                                          2. */
#define BCM_COSQ_SP3                        0x0F       /* Strict priority level
                                                          3. */
#define BCM_COSQ_SP4                        0x10       /* Strict priority level
                                                          4. */
#define BCM_COSQ_SP5                        0x11       /* Strict priority level
                                                          5. */
#define BCM_COSQ_SP6                        0x12       /* Strict priority level
                                                          6. */
#define BCM_COSQ_SP7                        0x13       /* Strict priority level
                                                          7. */
#define BCM_COSQ_SP8                        0x14       /* Strict priority level
                                                          8. */
#define BCM_COSQ_SP9                        0x15       /* Strict priority level
                                                          9. */
#define BCM_COSQ_SP10                       0x16       /* Strict priority level
                                                          10. */
#define BCM_COSQ_AF0                        0x17       /* Assured forwarding
                                                          level 0. */
#define BCM_COSQ_AF1                        0x18       /* Assured forwarding
                                                          level 1. */
#define BCM_COSQ_AF2                        0x19       /* Assured forwarding
                                                          level 2. */
#define BCM_COSQ_AF3                        0x1A       /* Assured forwarding
                                                          level 3. */
#define BCM_COSQ_AF4                        0x1B       /* Assured forwarding
                                                          level 4. */
#define BCM_COSQ_AF5                        0x1C       /* Assured forwarding
                                                          level 5. */
#define BCM_COSQ_AF6                        0x1D       /* Assured forwarding
                                                          level 6. */
#define BCM_COSQ_AF7                        0x1E       /* Assured forwarding
                                                          level 7. */
#define BCM_COSQ_GSP0                       0x1F       /* Global Strict priority
                                                          level 0. */
#define BCM_COSQ_GSP1                       0x20       /* Global Strict priority
                                                          level 1. */
#define BCM_COSQ_GSP2                       0x21       /* Global Strict priority
                                                          level 2. */
#define BCM_COSQ_GSP3                       0x22       /* Global Strict priority
                                                          level 3. */
#define BCM_COSQ_GSP4                       0x23       /* Global Strict priority
                                                          level 4. */
#define BCM_COSQ_GSP5                       0x24       /* Global Strict priority
                                                          level 5. */
#define BCM_COSQ_GSP6                       0x25       /* Global Strict priority
                                                          level 6. */
#define BCM_COSQ_GSP7                       0x26       /* Global Strict priority
                                                          level 7. */
#define BCM_COSQ_GSP8                       0x27       /* Global Strict priority
                                                          level 8. */
#define BCM_COSQ_GSP9                       0x28       /* Global Strict priority
                                                          level 9. */
#define BCM_COSQ_GSP10                      0x29       /* Global Strict priority
                                                          level 10. */
#define BCM_COSQ_DELAY_TOLERANCE_NORMAL     0x2A       /* Delay tolerance is
                                                          normal */
#define BCM_COSQ_DELAY_TOLERANCE_LOW_DELAY  0x2B       /* Delay tolerance is low
                                                          delay */
#define BCM_COSQ_DELAY_TOLERANCE_02         0x2C       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_03         0x2D       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_04         0x2E       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_05         0x2F       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_06         0x30       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_07         0x31       /* Flexible delay
                                                          tolerance level.
                                                          Mainly needed for
                                                          interfaces with rates
                                                          higher than 10G (e.g.
                                                          Interlaken) */
#define BCM_COSQ_DELAY_TOLERANCE_08         0x32       /* Flexible delay
                                                          tolerance level. */
#define BCM_COSQ_DELAY_TOLERANCE_09         0x33       /* Flexible delay
                                                          tolerance level. */
#define BCM_COSQ_DELAY_TOLERANCE_10         0x34       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_DELAY_TOLERANCE_11         0x35       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_DELAY_TOLERANCE_12         0x36       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_DELAY_TOLERANCE_13         0x37       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_DELAY_TOLERANCE_14         0x38       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_DELAY_TOLERANCE_15         0x39       /* Flexible delay
                                                          tolerance level */
#define BCM_COSQ_PON_DROPDOWN               0x3A       /* Weights for EPON DBA
                                                          Dropdown. */
#define BCM_COSQ_DELAY_TOLERANCE_10G_SLOW_ENABLED 0x3B       /* Adjusted for slow
                                                          enabled 10Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_10G_LOW_DELAY 0x3C       /* Adjusted for low delay
                                                          10Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_1G         0x3D       /* Adjusted for 1Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_40G_SLOW_ENABLED 0x3E       /* Adjusted for slow
                                                          enabled 40Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_40G_LOW_DELAY 0x3F       /* Adjusted for low delay
                                                          40Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_100G_SLOW_ENABLED 0x40       /* Adjusted for slow
                                                          enabled 100Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_100G_LOW_DELAY 0x41       /* Adjusted for low delay
                                                          100Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_200G_SLOW_ENABLED 0x42       /* Adjusted for slow
                                                          enabled 200Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_200G_LOW_DELAY 0x43       /* Adjusted for low delay
                                                          200Gb ports */
#define BCM_COSQ_DELAY_TOLERANCE_SET_COMMON_STATUS_MSG -2         /* sets the status
                                                          message generation
                                                          period, in the common
                                                          status message mode */
#define BCM_COSQ_MAX                        0x43       

#define BCM_COSQ_WEIGHT_UNLIMITED   -1         
#define BCM_COSQ_WEIGHT_STRICT      0          
#define BCM_COSQ_WEIGHT_MIN         1          

#define BCM_COSQ_PRIO_VALID(prio)  ((prio) >= 0 && (prio < 8)) 

#define BCM_COSQ_QUEUE_VALID(unit, numq)  \
    ((numq) >= 0 && (numq) < NUM_COS(unit)) 

#ifndef BCM_HIDE_DISPATCHABLE

/* Set Class of Service policy, weights and delay. */
extern int bcm_cosq_sched_set(
    int unit, 
    int mode, 
    const int weights[BCM_COS_COUNT], 
    int delay);

/* Set Class of Service policy, weights and delay. */
extern int bcm_cosq_port_sched_set(
    int unit, 
    bcm_pbmp_t pbm, 
    int mode, 
    const int weights[BCM_COS_COUNT], 
    int delay);

/* Set Class of Service policy, weights and delay. */
extern int bcm_cosq_sched_get(
    int unit, 
    int *mode, 
    int weights[BCM_COS_COUNT], 
    int *delay);

/* Get Class of Service policy, weights and delay. */
extern int bcm_cosq_port_sched_get(
    int unit, 
    bcm_pbmp_t pbm, 
    int *mode, 
    int weights[BCM_COS_COUNT], 
    int *delay);

/* Retrieve maximum weights for given COS policy. */
extern int bcm_cosq_sched_weight_max_get(
    int unit, 
    int mode, 
    int *weight_max);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_ALL            0x00000001 
#define BCM_COSQ_BW_EAV_MODE    0x00000008 /* Prioritize selected queue(s) for
                                              bandwidth before non-selected
                                              queue(s). */
#define BCM_COSQ_BW_LLFC        0x00000010 /* Link Level Flow Control setting */
#define BCM_COSQ_BW_PACKET_MODE 0x00000020 /* The bandwidth specified is in
                                              packets per second instead of
                                              kbits per second */

#ifndef BCM_HIDE_DISPATCHABLE

/* Configure a port bandwidth distribution among COS queues. */
extern int bcm_cosq_port_bandwidth_set(
    int unit, 
    bcm_port_t port, 
    bcm_cos_queue_t cosq, 
    uint32 kbits_sec_min, 
    uint32 kbits_sec_max, 
    uint32 flags);

/* Configure a port bandwidth distribution among COS queues. */
extern int bcm_cosq_port_bandwidth_get(
    int unit, 
    bcm_port_t port, 
    bcm_cos_queue_t cosq, 
    uint32 *kbits_sec_min, 
    uint32 *kbits_sec_max, 
    uint32 *flags);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Discard (WRED) related flags. */
#define BCM_COSQ_DISCARD_ENABLE             0x0001     
#define BCM_COSQ_DISCARD_CAP_AVERAGE        0x0002     
#define BCM_COSQ_DISCARD_NONTCP             0x0004     
#define BCM_COSQ_DISCARD_COLOR_GREEN        0x0100     
#define BCM_COSQ_DISCARD_COLOR_YELLOW       0x0200     
#define BCM_COSQ_DISCARD_COLOR_RED          0x0400     
#define BCM_COSQ_DISCARD_COLOR_BLACK        0x0800     
#define BCM_COSQ_DISCARD_COLOR_ALL          0x0F00     
#define BCM_COSQ_DISCARD_DROP_FIRST         BCM_COSQ_DISCARD_COLOR_RED 
#define BCM_COSQ_DISCARD_PACKETS            0x1000     
#define BCM_COSQ_DISCARD_BYTES              0x2000     
#define BCM_COSQ_DISCARD_MARK_CONGESTION    0x4000     
#define BCM_COSQ_DISCARD_PORT               0x8000     
#define BCM_COSQ_DISCARD_DEVICE             0x10000    
#define BCM_COSQ_DISCARD_BUFFER_DESC        0x20000    
#define BCM_COSQ_DISCARD_TCP                0x40000    
#define BCM_COSQ_DISCARD_SYSTEM             0x80000    
#define BCM_COSQ_DISCARD_PROBABILITY1       0x100000   
#define BCM_COSQ_DISCARD_PROBABILITY2       0x200000   
#define BCM_COSQ_DISCARD_IFP                0x400000   
#define BCM_COSQ_DISCARD_OUTER_CFI          0x800000   

#ifndef BCM_HIDE_DISPATCHABLE

/* Configure Weighted Random Early Discard (WRED). */
extern int bcm_cosq_discard_set(
    int unit, 
    uint32 flags);

/* Configure Weighted Random Early Discard (WRED). */
extern int bcm_cosq_discard_get(
    int unit, 
    uint32 *flags);

/* Configure a port's Weighted Random Early Discard (WRED) parameters. */
extern int bcm_cosq_discard_port_set(
    int unit, 
    bcm_port_t port, 
    bcm_cos_queue_t cosq, 
    uint32 color, 
    int drop_start, 
    int drop_slope, 
    int average_time);

/* Configure a port's Weighted Random Early Discard (WRED) parameters. */
extern int bcm_cosq_discard_port_get(
    int unit, 
    bcm_port_t port, 
    bcm_cos_queue_t cosq, 
    uint32 color, 
    int *drop_start, 
    int *drop_slope, 
    int *average_time);

#endif /* BCM_HIDE_DISPATCHABLE */

/* 
 * Definitions for queue priorities. Used for end-to-end scheduler flow
 * control configuration and for threshold setting
 */
#define BCM_COSQ_HIGH_PRIORITY  -4         
#define BCM_COSQ_LOW_PRIORITY   -5         

/* flags for various admission tests */
#define BCM_COSQ_CONTROL_ADMISSION_CT   0x0001     /* Category */
#define BCM_COSQ_CONTROL_ADMISSION_CTTC 0x0002     /* category, traffic class */
#define BCM_COSQ_CONTROL_ADMISSION_CTCC 0x0004     /* category, connection class */
#define BCM_COSQ_CONTROL_ADMISSION_ST   0x0008     /* statistics tag */
#define BCM_COSQ_CONTROL_ADMISSION_LLFC 0x0010     
#define BCM_COSQ_CONTROL_ADMISSION_PFC  0x0020     

/* Features that can be controlled on a gport/cosq  basis. */
typedef enum bcm_cosq_control_e {
    bcmCosqControlFabricConnectMinUtilization = 0, /* percentage of minimum utilization
                                           before connection is established. */
    bcmCosqControlFabricConnectMaxTime = 1, /* timeout configuration for minimum
                                           utilization connection setting. */
    bcmCosqControlBandwidthBurstMax = 2, /* kbits burst for maximum rate
                                           restriction if different from default
                                           burst size. */
    bcmCosqControlBandwidthBurstMin = 3, /* Burst for maximum rate restriction in
                                           kbits (for DNX [MZ] devices, check
                                           documentation for burst max units). */
    bcmCosqControlFabricConnectMax = 4, /* length a queue retains its fabric
                                           connection */
    bcmCosqControlPortTxqBackpressure = 5, /* the port capability of pausing
                                           traffic scheduling on the specific
                                           queue. */
    bcmCosqControlCopyPktToCpuUseTC = 6, /* use generic TC based COS mapping for
                                           copying packets to CPU. */
    bcmCosqControlWdrrGranularity = 7,  /* granularity selector for WDRR weight. */
    bcmCosqControlDpValueDlf = 8,       /* DP value of the unknown
                                           unicast/multicast packet. */
    bcmCosqControlDpChangeDlf = 9,      /* DP change control for the unknown
                                           unicast/multicast packet. */
    bcmCosqControlDpChangeXoff = 10,    /* DP change control for the
                                           flow-controllable port. */
    bcmCosqControlEavClassAWindow = 11, /* EAV Class A traffic credit carry-over
                                           control */
    bcmCosqControlEgressRateBurstAccumulateControl = 12, /* Burst accumulate control for egress
                                           rate. */
    bcmCosqControlEgressRateType = 13,  /* Rate type selector for egress rate
                                           control. */
    bcmCosqControlSchedulable = 14,     /* Allow TX scheduling of packets in the
                                           queue. */
    bcmCosqControlEEETxQCongestionThreshold = 15, /* If any of these thresholds are
                                           exceeded, EEE is disabled for all
                                           ports. */
    bcmCosqControlPacketLengthAdjust = 16, /* positive or negative queue packet
                                           length adjustment in bytes */
    bcmCosqControlCongestionManagedQueue = 17, /* Congestion managed queue identifier */
    bcmCosqControlCongestionFeedbackWeight = 18, /* Congestion feedback weight */
    bcmCosqControlCongestionSetPoint = 19, /* Congestion point queue size set point */
    bcmCosqControlCongestionSampleBytesMin = 20, /* Minimum number of bytes to enqueue
                                           between congestion status sampling */
    bcmCosqControlCongestionSampleBytesMax = 21, /* Maximum number of bytes to enqueue
                                           between congestion status sampling */
    bcmCosqControlFabricPortIngressScheduler = 22, /* Associating ingress scheduler node
                                           with Fabric/Child gport */
    bcmCosqControlFlowControlPriority = 23, /* Flow Control Mapping to port level HR
                                           end-to-end scheduler. For end-to-end
                                           port scheduler only
                                           BCM_COSQ_HIGH_PRIORITY value is
                                           meaningful for arg parameter. */
    bcmCosqControlSpLevelMax = 24,      /* Retreive Max SP level of a scheduler
                                           Element */
    bcmCosqControlSp0WeightMax = 25,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 0 */
    bcmCosqControlSp1WeightMax = 26,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 1 */
    bcmCosqControlSp2WeightMax = 27,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 2 */
    bcmCosqControlSp3WeightMax = 28,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 3 */
    bcmCosqControlSp4WeightMax = 29,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 4 */
    bcmCosqControlSp5WeightMax = 30,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 5 */
    bcmCosqControlSp6WeightMax = 31,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 6 */
    bcmCosqControlSp7WeightMax = 32,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 7 */
    bcmCosqControlSp8WeightMax = 33,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 8 */
    bcmCosqControlSp9WeightMax = 34,    /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 9 */
    bcmCosqControlSp10WeightMax = 35,   /* For a Scheduler Element, retreive the
                                           Max weight support for SP level 10 */
    bcmCosqControlDropLimitAlpha = 36,  /* Congestion drop limit alpha */
    bcmCosqControlDropLimitBytes = 37,  /* Congestion drop limit bytes */
    bcmCosqControlResumeLimitBytes = 38, /* Resume traffic flow from Congestion
                                           drop */
    bcmCosqControlYellowDropLimitBytes = 39, /* Congestion yellow drop limit bytes */
    bcmCosqControlRedDropLimitBytes = 40, /* Congestion red drop limit bytes */
    bcmCosqControlQselOffset = 41,      /* associate qsel_offset_id */
    bcmCosqControlEgressFlowControlThreshold0 = 42, /* Boundary before which all traffic
                                           flows */
    bcmCosqControlEgressFlowControlThreshold1 = 43, /* Boundary for some traffic throttling */
    bcmCosqControlEgressFlowControlThreshold2 = 44, /* Boundary for higher traffic
                                           throttling */
    bcmCosqControlEgressFlowControlThreshold3 = 45, /* Boundary after which all traffic
                                           drops */
    bcmCosqControlFabricPortScheduler = 46, /* Associating scheduler node with
                                           Fabric/Child gport */
    bcmCosqControlClassMap = 47,        /* Associate an Egress Cos to a specific
                                           resource */
    bcmCosqControlSchedulerAdoptAllPriority = 48, /* Scheduler node priority adoption
                                           scheme, 1 - adopt all priorities, 0 -
                                           standard behaviour */
    bcmCosqControlEgressPool = 49,      /* Associate an Egress Cos to a specific
                                           service pool */
    bcmCosqControlEgressPoolLimitBytes = 50, /* Shared pool limit setting */
    bcmCosqControlEgressPoolYellowLimitBytes = 51, /* Shared pool limit setting for yellow
                                           packets */
    bcmCosqControlEgressPoolRedLimitBytes = 52, /* Shared pool limit setting for red
                                           packets */
    bcmCosqControlEgressPoolLimitEnable = 53, /* Enable or disable using egress shared
                                           pool */
    bcmCosqControlEfPropagation = 54,   /* Enable or disable EF propagation */
    bcmCosqControlFlowControlState = 55, /* Set flow control state for the
                                           specified gport */
    bcmCosqControlHeaderUpdateField = 56, /* updating header with queue specific
                                           information/signature */
    bcmCosqControlFlowSlowRate1 = 57,   /* configure the device wide slow rate
                                           one */
    bcmCosqControlFlowSlowRate2 = 58,   /* configure the device wide slow rate
                                           two */
    bcmCosqControlFlowSlowRate = 59,    /* associate slow rate with a connector
                                           gport or scheduling element gport. In
                                           case of a composite element this
                                           configuration should be done with
                                           gport created when the element was
                                           added. the valid values are 0 =>
                                           disable, 1 => slowRate one, 2 => slow
                                           Rate two */
    bcmCosqControlDiscreteWeightLevel0 = 60, /* weight associated with level 0 of
                                           scheduler element having discrete
                                           weight attribute */
    bcmCosqControlDiscreteWeightLevel1 = 61, /* weight associated with level 1 of
                                           scheduler element having discrete
                                           weight attribute */
    bcmCosqControlDiscreteWeightLevel2 = 62, /* weight associated with level 2 of
                                           scheduler element having discrete
                                           weight attribute */
    bcmCosqControlDiscreteWeightLevel3 = 63, /* weight associated with level 3 of
                                           scheduler element having discrete
                                           weight attribute */
    bcmCosqControlAdmissionTestProfileA = 64, /* admission test profile A */
    bcmCosqControlAdmissionTestProfileB = 65, /* admission test profile B */
    bcmCosqControlFlowControlEnable = 66, /* Enables / Disables device-level flow
                                           control functionality */
    bcmCosqControlEgressBandwidthEnable = 67, /* Enable / Disables Egress bandwidth
                                           functionality */
    bcmCosqControlCongestionFeedbackMax = 68, /* Maximum value of the Congestion
                                           Feedback. Units: bytes */
    bcmCosqControlCongestionManagedQueueMin = 69, /* It defines the range of VOQs mapped
                                           to CP-Id */
    bcmCosqControlCongestionManagedQueueMax = 70, /* It defines the range of VOQs mapped
                                           to CP-Id */
    bcmCosqControlCongestionThresholdRandom = 71, /* Randomize the Congestion Sample
                                           Threshold */
    bcmCosqControlIgnoreAnemic = 72,    /* Ignore anemic priority */
    bcmCosqControlCongestionProxy = 73, /* Enable/disable QCN Proxy */
    bcmCosqControlSchedulerTxqEmptySelect = 74, /* Select the source of TxQ empty status */
    bcmCosqControlWdrrNegCreditClearEnable = 75, /* Enable auto-clear on WDRR's negative
                                           credit in next run */
    bcmCosqControlSchedulerBurstModeEnable = 76, /* Enable the burst mode for round robin
                                           scheduler */
    bcmCosqControlEgressWredDropCancel = 77, /* Bypass the WRED drop at egress side */
    bcmCosqControlMulticastPriorityIngressScheduling = 78, /* Multicast packets traffic class
                                           mapping to high/low strict priority */
    bcmCosqControlEgressUCQueueSharedLimitBytes = 79, /* Egress UC Shared Queue limit setting */
    bcmCosqControlEgressUCQueueMinLimitBytes = 80, /* UC Min Queue limit setting */
    bcmCosqControlEgressUCSharedDynamicEnable = 81, /* Enable Dynamic threshold limit for
                                           Egress UC Queue */
    bcmCosqControlEgressUCQueueLimitEnable = 82, /* Enable Discards based on configured
                                           threshold for Egress UC Queue */
    bcmCosqControlEgressMCQueueSharedLimitBytes = 83, /* Egress MC Shared Queue limit setting */
    bcmCosqControlEgressMCQueueMinLimitBytes = 84, /* MC Min Queue limit setting */
    bcmCosqControlEgressMCSharedDynamicEnable = 85, /* Enable Dynamic threshold limit for
                                           Egress MC Queue */
    bcmCosqControlEgressMCQueueLimitEnable = 86, /* Enable Discards based on configured
                                           threshold for Egress UC Queue */
    bcmCosqControlIngressPortPGSharedLimitBytes = 87, /* Ingress Port PG Shared limit setting */
    bcmCosqControlIngressPortPGMinLimitBytes = 88, /* Ingress Port PG Min limit setting */
    bcmCosqControlIngressPortPGSharedDynamicEnable = 89, /* Enable Dynamic threshold limit for
                                           Ingress Port PG */
    bcmCosqControlIngressPortPoolMaxLimitBytes = 90, /* Ingress Port SP Max limit setting */
    bcmCosqControlIngressPortPoolMinLimitBytes = 91, /* Ingress Port SP Min limit setting */
    bcmCosqControlBandwidthBurstMaxEmptyQueue = 92, /* Sets the maximum amount of credits
                                           that an empty queue can get */
    bcmCosqControlBandwidthBurstMaxFlowControlledQueue = 93, /* Sets the maximum amount of credits
                                           for a flow controlled queue */
    bcmCosqControlSPPortLimitState = 94, /* For each port , retrieve limit state
                                           of the corresponding shared pool of
                                           the port */
    bcmCosqControlPGPortLimitState = 95, /* For each port , retrieve limit state
                                           of the corresponding priority group
                                           of the port */
    bcmCosqControlPGPortXoffState = 96, /* For each port , retrieve xoff state
                                           of the corresponding priority group
                                           of the port */
    bcmCosqControlPoolRedDropState = 97, /* For each pool , retrieve drop state
                                           of the red packets for the pool */
    bcmCosqControlPoolYellowDropState = 98, /* For each pool , retrieve drop state
                                           of the yellow packets for the pool */
    bcmCosqControlPoolGreenDropState = 99, /* For each pool , retrieve drop state
                                           of the green packets for the pool */
    bcmCosqControlIngressPool = 100,    /* Associate an Ingress Cos to a
                                           specific service pool */
    bcmCosqControlEEEQueueThresholdProfileSelect = 101, /* Select queue depth threshold as the
                                           condition to exit LPI state */
    bcmCosqControlEEEPacketLatencyProfileSelect = 102, /* Select packet max latency as the
                                           condition to exit LPI state */
    bcmCosqControlPortQueueUcast = 103, /* retrieve port, cosq queue number of
                                           PBSMH UC packet headers */
    bcmCosqControlPortQueueMcast = 104, /* retrieve port, cosq queue number of
                                           PBSMH MC packet headers */
    bcmCosqControlEgressPortPoolYellowLimitBytes = 105, /* Egress Port Service Pool limit
                                           setting for yellow packets */
    bcmCosqControlEgressPortPoolRedLimitBytes = 106 /* Egress Port Service Pool limit
                                           setting for red packets */
} bcm_cosq_control_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* set various features at the gport/cosq level. */
extern int bcm_cosq_control_set(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_control_t type, 
    int arg);

/* Get various features at the gport/cosq level. */
extern int bcm_cosq_control_get(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_control_t type, 
    int *arg);

#endif /* BCM_HIDE_DISPATCHABLE */

/* For Virtual output queues (system ports) */
typedef struct bcm_cosq_gport_discard_s {
    uint32 flags; 
    int min_thresh;         /* Queue depth in bytes to begin dropping. */
    int max_thresh;         /* Queue depth in bytes to drop all packets. */
    int drop_probability;   /* Drop probability at max threshold. */
    int gain;               /* Determines the smoothing that should be applied. */
    int ecn_thresh;         /* Queue depth in bytes to stop marking and start
                               dropping. */
    int refresh_time;       /* Actual average refresh time. */
} bcm_cosq_gport_discard_t;

/* For Virtual output queues (system ports) */
typedef enum bcm_cosq_gport_stats_e {
    bcmCosqGportGreenAcceptedPkts = 0,  /* Green/DP0, accepted packet count. */
    bcmCosqGportGreenAcceptedBytes = 1, /* Green/DP0, accepted byte count. */
    bcmCosqGportNotGreenAcceptedPkts = 2, /* Not Green/DP1-3, accepted packet
                                           count. */
    bcmCosqGportNotGreenAcceptedBytes = 3, /* Not Green/DP1-3, accepted byte count. */
    bcmCosqGportGreenCongestionMarkedPkts = 4, /* Green/DP0, ECN Marked packets. */
    bcmCosqGportGreenCongestionMarkedBytes = 5, /* Green/DP0, ECN Marked bytes. */
    bcmCosqGportGreenDiscardDroppedPkts = 6, /* Green/DP0, WRED dropped packets. */
    bcmCosqGportGreenDiscardDroppedBytes = 7, /* Green/DP0, WRED dropped bytes. */
    bcmCosqGportYellowAcceptedPkts = 8, /* Yellow/DP1, accepted packet count. */
    bcmCosqGportYellowAcceptedBytes = 9, /* Yellow/DP1, accepted byte count. */
    bcmCosqGportYellowCongestionMarkedPkts = 10, /* Yellow/DP1, ECN Marked packets. */
    bcmCosqGportYellowCongestionMarkedBytes = 11, /* Yellow/DP1, ECN nMarked bytes. */
    bcmCosqGportYellowDiscardDroppedPkts = 12, /* Yellow/DP1, WRED dropped packets. */
    bcmCosqGportYellowDiscardDroppedBytes = 13, /* Yellow/DP1, WRED dropped bytes. */
    bcmCosqGportRedAcceptedPkts = 14,   /* Red/DP2, accepted packet count. */
    bcmCosqGportRedAcceptedBytes = 15,  /* Red/DP2, accepted byte count. */
    bcmCosqGportRedCongestionMarkedPkts = 16, /* Red/DP2, ECN Marked packets. */
    bcmCosqGportRedCongestionMarkedBytes = 17, /* Red/DP2, ECN Marked bytes. */
    bcmCosqGportRedDiscardDroppedPkts = 18, /* Red/DP2, WRED dropped packets. */
    bcmCosqGportRedDiscardDroppedBytes = 19, /* Red/DP2, WRED dropped bytes. */
    bcmCosqGportBlackAcceptedPkts = 20, /* Black/DP3, accepted packet count. */
    bcmCosqGportBlackAcceptedBytes = 21, /* Black/DP3, accepted byte count. */
    bcmCosqGportNonWredDroppedPkts = 22, /* NON-WRED dropped packet count. */
    bcmCosqGportNonWredDroppedBytes = 23, /* NON-WRED dropped byte count. */
    bcmCosqGportDequeuedPkts = 24,      /* dequeued packets. */
    bcmCosqGportDequeuedBytes = 25,     /* dequeued bytes. */
    bcmCosqGportGreenDroppedPkts = 26,  /* Green/DP0, non-WRED dropped pkts. */
    bcmCosqGportGreenDroppedBytes = 27, /* Green/DP0, non-WRED dropped bytes. */
    bcmCosqGportNotGreenDroppedPkts = 28, /* Not Green/DP1-3 dropped pkts. */
    bcmCosqGportNotGreenDroppedBytes = 29, /* Not Green/DP1-3 dropped bytes. */
    bcmCosqGportYellowDroppedPkts = 30, /* Yellow/DP1, non-WRED dropped pkts. */
    bcmCosqGportYellowDroppedBytes = 31, /* Yellow/DP1, non-WRED dropped bytes. */
    bcmCosqGportRedDroppedPkts = 32,    /* Red/DP2, non-WRED dropped pkts. */
    bcmCosqGportRedDroppedBytes = 33,   /* Red/DP2, non-WRED dropped bytes. */
    bcmCosqGportBlackCongestionMarkedPkts = 34, /* Black/DP3, ECN Marked packets. */
    bcmCosqGportBlackCongestionMarkedBytes = 35, /* Black/DP3, ECN Marked bytes. */
    bcmCosqGportBlackDiscardDroppedPkts = 36, /* Black/DP3, WRED dropped at packets. */
    bcmCosqGportBlackDiscardDroppedBytes = 37, /* Black/DP3, WRED dropped bytes. */
    bcmCosqGportBlackDroppedPkts = 38,  /* Black/DP3, non-WRED dropped at
                                           packets. */
    bcmCosqGportBlackDroppedBytes = 39, /* Black/DP3, non-WRED dropped bytes. */
    bcmCosqGportOverSubscribeTotelDroppedPkts = 40, /* Free list underflow, pkts dropped. */
    bcmCosqGportOverSubscribeTotalDroppedBytes = 41, /* Free list underflow, bytes dropped. */
    bcmCosqGportOverSubscribeGuaranteeDroppedPkts = 42, /* Gbl buf thres guarantee, pkts
                                           dropped. */
    bcmCosqGportOverSubscribeGuaranteedDroppedBytes = 43, /* Gbl buf thres guarantee, bytes
                                           dropped. */
    bcmCosqGportDiscardDroppedPkts = 44, /* discarded packets */
    bcmCosqGportDiscardDroppedBytes = 45, /* discarded bytes */
    bcmCosqGportYellowRedDiscardDroppedPkts = 46, /* Yellow and Red dropped packets */
    bcmCosqGportYellowRedDiscardDroppedBytes = 47, /* Yellow and Red dropped bytes */
    bcmCosqGportEnqueuedPkts = 48,      /* enqueued packets */
    bcmCosqGportEnqueuedBytes = 49,     /* enqueued bytes */
    bcmCosqGportOutLimitDroppedPkts = 50, /* Egress Admission Control (EAC)
                                           dropped pkts */
    bcmCosqGportOutLimitDroppedBytes = 51, /* EAC dropped bytes */
    bcmCosqGportOutLimitDroppedGreenPkts = 52, /* EAC dropped green pkts */
    bcmCosqGportOutLimitDroppedGreenBytes = 53, /* EAC dropped green bytes */
    bcmCosqGportOutLimitDroppedYellowPkts = 54, /* EAC dropped yellow pkts */
    bcmCosqGportOutLimitDroppedYellowBytes = 55, /* EAC dropped yellow bytes */
    bcmCosqGportOutLimitDroppedRedPkts = 56, /* EAC dropped red pkts */
    bcmCosqGportOutLimitDroppedRedBytes = 57, /* EAC dropped red bytes */
    bcmCosqGportOutLimitDroppedMulticastPkts = 58, /* EAC dropped multicast pkts */
    bcmCosqGportOutLimitDroppedMulticastBytes = 59, /* EAC dropped multicast bytes */
    bcmCosqGportOutPkts = 60,           /* Egress Interface. */
    bcmCosqGportOutBytes = 61,          /* Egress Interface. */
    bcmCosqGportReceivedBytes = 62,     /* Bytes received into queue. */
    bcmCosqGportReceivedPkts = 63,      /* Pkts received into queue. */
    bcmCosqGportDroppedBytes = 64,      /* Bytes dropped in queue. */
    bcmCosqGportDroppedPkts = 65,       /* Pkts dropped in queue. */
    bcmCosqGportDelayedBytes = 66,      /* Delayed bytes. */
    bcmCosqGportDelayedHundredUs = 67,  /* Maximum Pkts delay. */
    bcmCosqGportGreenPkts = 68,         /* Green/DP0 packet count. */
    bcmCosqGportGreenBytes = 69,        /* Green/DP0 byte count. */
    bcmCosqGportNotGreenPkts = 70,      /* Not-Green/DP0 packet count. */
    bcmCosqGportNotGreenBytes = 71,     /* Not-Green/DP0 byte count. */
    bcmCosqGportOffset0Bytes = 72,      /* Byte count at configurable offset 0. */
    bcmCosqGportOffset0Packets = 73,    /* Packet count at configurable offset
                                           0. */
    bcmCosqGportOffset1Bytes = 74,      /* Byte count at configurable offset 1. */
    bcmCosqGportOffset1Packets = 75,    /* Packet count at configurable offset
                                           1. */
    bcmCosqGportOffset2Bytes = 76,      /* Byte count at configurable offset 2. */
    bcmCosqGportOffset2Packets = 77,    /* Packet count at configurable offset
                                           2. */
    bcmCosqGportOffset3Bytes = 78,      /* Byte count at configurable offset 3. */
    bcmCosqGportOffset3Packets = 79,    /* Packet count at configurable offset
                                           3. */
    bcmCosqGportOffset4Bytes = 80,      /* Byte count at configurable offset 4. */
    bcmCosqGportOffset4Packets = 81,    /* Packet count at configurable offset
                                           4. */
    bcmCosqGportOffset5Bytes = 82,      /* Byte count at configurable offset 5. */
    bcmCosqGportOffset5Packets = 83,    /* Packet count at configurable offset
                                           5. */
    bcmCosqGportOffset6Bytes = 84,      /* Byte count at configurable offset 6. */
    bcmCosqGportOffset6Packets = 85,    /* Packet count at configurable offset
                                           6. */
    bcmCosqGportOffset7Bytes = 86,      /* Byte count at configurable offset 7. */
    bcmCosqGportOffset7Packets = 87,    /* Packet count at configurable offset
                                           7. */
    bcmCosqGportStatCount = 88          /* Must be the last entry ! */
} bcm_cosq_gport_stats_t;

/* Profile stat event-related flags. */
#define BCM_COSQ_GPORT_STATS_SHARED 0x00000001 

/* Statistics Profile */
typedef struct bcm_cosq_gport_stat_profile_s {
    SHR_BITDCL stats[_SHR_BITDCLSIZE(bcmCosqGportOutBytes)]; /* Use Gport Stats Enumeration */
} bcm_cosq_gport_stat_profile_t;

#define BCM_COSQ_GPORT_STAT_PROFILE_INIT(_profile_set)  SHR_BITCLR_RANGE(_profile_set.stats, 0, (sizeof(_profile_set)*8)) 
#define BCM_COSQ_GPORT_STAT_PROFILE_ADD(_profile_set, _stat)  SHR_BITSET(_profile_set.stats, _stat) 
#define BCM_COSQ_GPORT_STAT_PROFILE_REMOVE(_profile_set, _stat)  SHR_BITCLR(_profile_set.stats, _stat) 
#define BCM_COSQ_GPORT_STAT_PROFILE_TEST(_profile_set, _stat)  SHR_BITGET(_profile_set.stats, _stat) 

#define BCM_COSQ_PRIORITY_PROFILE_MAX_SIZE  64         /* Maximum priority
                                                          profile size across
                                                          all devices. */

/* Priority Profile */
typedef struct bcm_cosq_gport_priority_profile_s {
    SHR_BITDCL pri[_SHR_BITDCLSIZE(BCM_COSQ_PRIORITY_PROFILE_MAX_SIZE)]; /* Use Gport priority macros Enumeration */
} bcm_cosq_gport_priority_profile_t;

#define BCM_COSQ_PRI_PROFILE_SET(_profile, _offset)  SHR_BITSET(_profile.pri, _offset) 
#define BCM_COSQ_PRI_PROFILE_GET(_profile, _offset)  SHR_BITGET(_profile.pri, _offset) 
#define BCM_COSQ_PRI_PROFILE_CLEAR(_profile, _offset)  SHR_BITCLR(_profile.pri, (sizeof(_profile))) 
#define BCM_COSQ_PRI_PROFILE_CLEAR_ALL(_profile)  SHR_BITCLR_RANGE(_profile.pri, 0, BCM_COSQ_PRIORITY_PROFILE_MAX_SIZE) 
#define BCM_COSQ_PRI_PROFILE_SET_ALL(_profile)  SHR_BITSET_RANGE(_profile.pri, 0, BCM_COSQ_PRIORITY_PROFILE_MAX_SIZE) 

#ifndef BCM_HIDE_DISPATCHABLE

/* Get a COSQ priority profile. */
extern int bcm_cosq_priority_profile_get(
    int unit, 
    int pri_profile_id, 
    int *count, 
    bcm_cosq_gport_priority_profile_t *pri_profile);

/* Initialize a COSQ priority profile. */
extern int bcm_cosq_priority_profile_set(
    int unit, 
    int pri_profile_id, 
    int count, 
    bcm_cosq_gport_priority_profile_t *pri_profile);

/* Associate a queue range with a priority profile. */
extern int bcm_cosq_priority_set(
    int unit, 
    int start_queue, 
    int end_queue, 
    int pri_profile_id);

/* Get the priority profile ID associated with a queue range. */
extern int bcm_cosq_priority_get(
    int unit, 
    int start_queue, 
    int end_queue, 
    int *pri_profile_id);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Initialize a COSQ GPORT discard structure. */
extern void bcm_cosq_gport_discard_t_init(
    bcm_cosq_gport_discard_t *discard);

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t *physical_port, 
    int *num_cos_levels, 
    uint32 *flags);

#endif /* BCM_HIDE_DISPATCHABLE */

typedef int (*bcm_cosq_gport_traverse_cb)(
    int unit, 
    bcm_gport_t port, 
    int numq, 
    uint32 flags, 
    bcm_gport_t gport, 
    void *user_data);

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_traverse(
    int unit, 
    bcm_cosq_gport_traverse_cb cb, 
    void *user_data);

extern int bcm_cosq_fabric_distribution_add(
    int unit, 
    bcm_fabric_distribution_t ds_id, 
    int num_cos_levels, 
    uint32 flags, 
    bcm_gport_t *req_gport);

extern int bcm_cosq_fabric_distribution_get(
    int unit, 
    bcm_fabric_distribution_t ds_id, 
    int *num_cos_levels, 
    bcm_gport_t *req_gport, 
    uint32 *flags);

extern int bcm_cosq_gport_size_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 bytes_min, 
    uint32 bytes_max);

extern int bcm_cosq_gport_size_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 *bytes_min, 
    uint32 *bytes_max);

#endif /* BCM_HIDE_DISPATCHABLE */

/* color size related flags. */
#define BCM_COSQ_GPORT_SIZE_BYTES           0x0001     
#define BCM_COSQ_GPORT_SIZE_BUFFER_DESC     0x0002     
#define BCM_COSQ_GPORT_SIZE_COLOR_BLIND     0x0004     
#define BCM_COSQ_GPORT_SIZE_COLOR_SYSTEM_RED 0x0008     

/* color size configuration */
typedef struct bcm_cosq_gport_size_s {
    uint32 size_min;        /* minimum size */
    uint32 size_max;        /* maximum size */
    int32 size_alpha_max;   /* additional maximum size limit: free size * 2 ^
                               size_alpha_max */
} bcm_cosq_gport_size_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* size setting (color based) */
extern int bcm_cosq_gport_color_size_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_color_t color, 
    uint32 flags, 
    bcm_cosq_gport_size_t *gport_size);

/* Get size_setting (color based) */
extern int bcm_cosq_gport_color_size_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_color_t color, 
    uint32 flags, 
    bcm_cosq_gport_size_t *gport_size);

extern int bcm_cosq_gport_enable_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    int enable);

extern int bcm_cosq_gport_stat_sync_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_gport_stats_t stat, 
    uint64 *value);

extern int bcm_cosq_gport_enable_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    int *enable);

extern int bcm_cosq_gport_stat_enable_set(
    int unit, 
    bcm_gport_t gport, 
    int enable);

extern int bcm_cosq_gport_stat_enable_get(
    int unit, 
    bcm_gport_t gport, 
    int *enable);

extern int bcm_cosq_gport_stat_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_gport_stats_t stat, 
    uint64 *value);

extern int bcm_cosq_gport_stat_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_gport_stats_t stat, 
    uint64 value);

extern int bcm_cosq_gport_stat_config_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_gport_stat_profile_t *profile);

extern int bcm_cosq_gport_stat_config_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_gport_stat_profile_t profile);

extern int bcm_cosq_gport_statistic_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_gport_stats_t stat, 
    uint64 *value);

extern int bcm_cosq_gport_statistic_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_gport_stats_t stat, 
    uint64 value);

extern int bcm_cosq_gport_statistic_multi_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    int stat_count, 
    bcm_cosq_gport_stats_t *stats_array, 
    int value_count, 
    uint64 *value_array);

extern int bcm_cosq_gport_statistic_multi_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_gport_t lgl_gport, 
    bcm_cos_queue_t cosq, 
    int stat_count, 
    bcm_cosq_gport_stats_t *stats_array, 
    uint64 value);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_GPORT_WITH_ID              0x00000001 
#define BCM_COSQ_GPORT_SCHEDULER            0x00000002 
#define BCM_COSQ_GPORT_OVERLAY              0x00000004 
#define BCM_COSQ_GPORT_UCAST_QUEUE_GROUP    0x00000008 
#define BCM_COSQ_GPORT_DESTMOD_UCAST_QUEUE_GROUP 0x00000010 
#define BCM_COSQ_GPORT_MCAST_QUEUE          0x00000010 
#define BCM_COSQ_GPORT_MCAST_QUEUE_GROUP    0x00000020 
#define BCM_COSQ_GPORT_SUBSCRIBER           0x00000040 
#define BCM_COSQ_GPORT_TM_FLOW_ID           0x00000040 
#define BCM_COSQ_GPORT_EGRESS_GROUP         0x00000080 
#define BCM_COSQ_GPORT_DISABLE              0x00000100 /* Disable queue, used
                                                          for
                                                          BCM_COSQ_GPORT_CALENDAR
                                                          scheduling discipline */
#define BCM_COSQ_GPORT_CALENDAR             0x00000200 /* Indicates that this
                                                          gport is of scheduling
                                                          type CALENDAR */
#define BCM_COSQ_GPORT_QSEL_ENTRY_DISABLE   0x00000400 /* Inhibits automatic
                                                          update of queue
                                                          mapping table based
                                                          upon the GPORT
                                                          parameters */
#define BCM_COSQ_GPORT_VOQ_CONNECTOR        0x00000800 /* Indicates a VoQ
                                                          connector resource has
                                                          to be allocated */
#define BCM_COSQ_GPORT_VSQ                  0x00001000 /* Indicates a VSQ
                                                          resource has to be
                                                          allocated */
#define BCM_COSQ_GPORT_ISQ                  0x00002000 /* indicates that an ISQ
                                                          resource has to be
                                                          allocated */
#define BCM_COSQ_GPORT_REPLACE              0x00004000 /* modify configuration */
#define BCM_COSQ_GPORT_RECYCLE              0x00008000 /* Indicate a recycle
                                                          queue space */
#define BCM_COSQ_GPORT_SCHEDULER_HR_DUAL_WFQ 0x00010000 /* The scheduler works in
                                                          Dual HR mode */
#define BCM_COSQ_GPORT_SCHEDULER_HR_ENHANCED 0x00020000 /* The scheduler works in
                                                          Enhanced HR mode */
#define BCM_COSQ_GPORT_SCHEDULER_HR_SINGLE_WFQ 0x00030000 /* The scheduler works in
                                                          Single HR mode */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_MODE1_4SP 0x00040000 /* The scheduler works in
                                                          4 SP levels CL mode */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_MODE2_3SP_WFQ 0x00080000 /* The scheduler works in
                                                          3 SP levels, the last
                                                          being WFQ */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_MODE3_WFQ_2SP 0x000C0000 /* The scheduler works in
                                                          2 SP levels, the first
                                                          one being WFQ */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_MODE4_2SP_WFQ 0x00100000 /* The scheduler works in
                                                          2 SP levels, the last
                                                          one being WFQ */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_MODE5_1SP_WFQ 0x00140000 /* The scheduler works in
                                                          1 SP level and that is
                                                          WFQ mode */
#define BCM_COSQ_GPORT_SCHEDULER_FQ         0x00200000 /* The scheduler works in
                                                          Fair Queue mode */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_ENHANCED_LOWPRI_FQ 0x00400000 /* The CL scheduler
                                                          element is in enhanced
                                                          CL mode, when the
                                                          spouse FQ is the
                                                          lowest priority */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_ENHANCED_HIGHPRI_FQ 0x00800000 /* The CL scheduler
                                                          element is in enhanced
                                                          CL mode, when the
                                                          spouse FQ is the
                                                          highest priority */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_WFQ_MODE_DISCREET 0x01000000 /* WFQ mode is Discreet */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_WFQ_MODE_CLASS 0x02000000 /* WFQ mode is class
                                                          based */
#define BCM_COSQ_GPORT_SCHEDULER_WFQ        0x02000000 /* The scheduler works in
                                                          generic WFQ mode */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_WFQ_MODE_INDEPENDENT 0x03000000 /* WFQ mode is
                                                          independent (inverse) */
#define BCM_COSQ_GPORT_SCHEDULER_CLASS_WFQ_MODE_INDEPENDENT_PROPORTIONAL 0x08000000 /* WFQ mode is
                                                          independent
                                                          (proportinal) */
#define BCM_COSQ_GPORT_SCHEDULER_DUAL_SHAPER 0x04000000 /* The scheduler element
                                                          is in Dual shaper
                                                          mode. This scheduler
                                                          element is composed of
                                                          CL scheduler element
                                                          for CIR and a FQ
                                                          scheduler element for
                                                          EIR. */
#define BCM_COSQ_GPORT_COMPOSITE            0x10000000 /* composite mode for
                                                          CIR/PIR functionality */
#define BCM_COSQ_GPORT_NON_CONTIGUOUS_VOQ_CONNECTOR 0x00010000 /* queue, connector
                                                          resource associated
                                                          with non-contiguous
                                                          connector region */
#define BCM_COSQ_GPORT_WITH_SHAPING         0x04000000 
#define BCM_COSQ_GPORT_WITHOUT_SHAPING      0x08000000 
#define BCM_COSQ_GPORT_MULTIPATH            0x10000000 
#define BCM_COSQ_GPORT_VLAN_UCAST_QUEUE_GROUP 0x20000000 
#define BCM_COSQ_GPORT_VIRTUAL_PORT         0x40000000 
#define BCM_COSQ_GPORT_ADD_COS              0x80000000 
#define BCM_COSQ_GPORT_CONF_SCOPE_CORE0     0x20000000 
#define BCM_COSQ_GPORT_CONF_SCOPE_CORE1     0x40000000 

#define BCM_COSQ_GPORT_PRIORITY_PROFILE_SET(_flags, _profile)  \
    _SHR_COSQ_GPORT_PRIORITY_PROFILE_SET(_flags, _profile) 

#define BCM_COSQ_GPORT_LOCAL    BCM_COSQ_GPORT_SUBSCRIBER /* for compatibility */

#define BCM_COSQ_SUBSCRIBER_MAP_PORT_VLAN   0x00000001 
#define BCM_COSQ_SUBSCRIBER_MAP_ENCAP_ID    0x00000002 

typedef struct bcm_cosq_subscriber_map_s {
    uint32 flags; 
    bcm_port_t port; 
    bcm_vlan_t vlan; 
    bcm_if_t encap_id; 
    bcm_gport_t queue_id; 
} bcm_cosq_subscriber_map_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_subscriber_map_add(
    int unit, 
    bcm_cosq_subscriber_map_t *map);

extern int bcm_cosq_subscriber_map_delete(
    int unit, 
    bcm_cosq_subscriber_map_t *map);

extern int bcm_cosq_subscriber_map_delete_all(
    int unit);

extern int bcm_cosq_subscriber_map_get(
    int unit, 
    bcm_cosq_subscriber_map_t *map);

#endif /* BCM_HIDE_DISPATCHABLE */

typedef int (*bcm_cosq_subscriber_map_traverse_cb)(
    int unit, 
    bcm_cosq_subscriber_map_t *map, 
    void *user_data);

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_subscriber_traverse(
    int unit, 
    bcm_cosq_subscriber_map_traverse_cb cb, 
    void *user_data);

extern int bcm_cosq_gport_add(
    int unit, 
    bcm_gport_t port, 
    int numq, 
    uint32 flags, 
    bcm_gport_t *gport);

extern int bcm_cosq_gport_delete(
    int unit, 
    bcm_gport_t gport);

/* Set the mapping from internal priority to COS queue. */
extern int bcm_cosq_gport_mapping_set(
    int unit, 
    bcm_port_t ing_port, 
    bcm_cos_t int_pri, 
    uint32 flags, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq);

/* Get the mapping from internal priority to COS queue. */
extern int bcm_cosq_gport_mapping_get(
    int unit, 
    bcm_port_t ing_port, 
    bcm_cos_t int_pri, 
    uint32 flags, 
    bcm_gport_t *gport, 
    bcm_cos_queue_t *cosq);

extern int bcm_cosq_gport_bandwidth_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 kbits_sec_min, 
    uint32 kbits_sec_max, 
    uint32 flags);

extern int bcm_cosq_gport_bandwidth_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 *kbits_sec_min, 
    uint32 *kbits_sec_max, 
    uint32 *flags);

extern int bcm_cosq_gport_sched_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    int mode, 
    int weight);

extern int bcm_cosq_gport_sched_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    int *mode, 
    int *weight);

#endif /* BCM_HIDE_DISPATCHABLE */

/* dynamic weights types. */
typedef enum bcm_cosq_dynamic_state_e {
    bcmCosqDynamicStateNormal = 0,      /* Regular weight */
    bcmCosqDynamicStateQueue0Congested = 1, /* Pipe 0 is congested, Pipe 1 not
                                           congested */
    bcmCosqDynamicStateQueue1Congested = 2 /* Pipe 1 is congested, Pipe 0 not
                                           congested */
} bcm_cosq_dynamic_state_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_dynamic_sched_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_dynamic_state_t state, 
    int weight);

extern int bcm_cosq_gport_dynamic_sched_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_dynamic_state_t state, 
    int *weight);

extern int bcm_cosq_gport_discard_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_gport_discard_t *discard);

extern int bcm_cosq_gport_discard_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_gport_discard_t *discard);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_SCHED_CONFIG_EXPEDITE  0x00000001 

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_sched_config_set(
    int unit, 
    bcm_gport_t gport, 
    int sched_mode, 
    int int_pri, 
    uint32 flags);

extern int bcm_cosq_gport_sched_config_get(
    int unit, 
    bcm_gport_t gport, 
    int sched_mode, 
    int int_pri, 
    uint32 *flags);

extern int bcm_cosq_gport_flow_control_set(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_t int_pri, 
    uint32 flow_control_mask);

extern int bcm_cosq_gport_flow_control_get(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_t int_pri, 
    uint32 *flow_control_mask);

extern int bcm_cosq_gport_attach(
    int unit, 
    bcm_gport_t sched_port, 
    bcm_gport_t input_port, 
    bcm_cos_queue_t cosq);

extern int bcm_cosq_gport_detach(
    int unit, 
    bcm_gport_t sched_port, 
    bcm_gport_t input_port, 
    bcm_cos_queue_t cosq);

extern int bcm_cosq_gport_attach_get(
    int unit, 
    bcm_gport_t sched_port, 
    bcm_gport_t *input_port, 
    bcm_cos_queue_t *cosq);

/* 
 * Get the child node GPORT atatched to N-th index (cosq) of the
 * scheduler GPORT
 */
extern int bcm_cosq_gport_child_get(
    int unit, 
    bcm_gport_t in_gport, 
    bcm_cos_queue_t cosq, 
    bcm_gport_t *out_gport);

/* retreive parent scheduler for a child gport */
extern int bcm_cosq_gport_parent_get(
    int unit, 
    bcm_gport_t child_port, 
    bcm_cos_queue_t cos, 
    bcm_gport_t *parent_port);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_GPORT_QUEUE_ATTACH_WITH_ID 0x00000001 
#define BCM_COS_MULTICAST_EF                -2         
#define BCM_COS_MULTICAST_NON_EF            -3         

#define BCM_COSQ_GPORT_ATTACH_ID_SYSPORT_SET(_attach_id, _sysport)  \
    _SHR_COSQ_GPORT_ATTACH_ID_SYSPORT_SET(_attach_id,_sysport) 

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_queue_attach(
    int unit, 
    uint32 flags, 
    bcm_gport_t ingress_queue, 
    bcm_cos_t ingress_int_pri, 
    bcm_gport_t egress_queue, 
    bcm_cos_t egress_int_pri, 
    int *attach_id);

extern int bcm_cosq_gport_queue_detach(
    int unit, 
    bcm_gport_t ingress_queue, 
    bcm_cos_t ingress_int_pri, 
    int attach_id);

extern int bcm_cosq_gport_queue_attach_get(
    int unit, 
    bcm_gport_t ingress_queue, 
    bcm_cos_t ingress_int_pri, 
    bcm_gport_t *egress_queue, 
    bcm_cos_t *egress_int_pri, 
    int attach_id);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_GPORT_CONNECTION_INGRESS   0x01       /* establishing the
                                                          connection on ingress */
#define BCM_COSQ_GPORT_CONNECTION_EGRESS    0x02       /* establishing the
                                                          connection on egress */
#define BCM_COSQ_GPORT_CONNECTION_INVALID   0x04       /* removing the
                                                          connection */

/* connection information */
typedef struct bcm_cosq_gport_connection_s {
    uint32 flags; 
    bcm_module_t remote_modid;  /* remote module id. */
    bcm_gport_t voq;            /* voq gport */
    bcm_gport_t voq_connector;  /* voq connector gport */
} bcm_cosq_gport_connection_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_connection_set(
    int unit, 
    bcm_cosq_gport_connection_t *gport_connect);

extern int bcm_cosq_gport_connection_get(
    int unit, 
    bcm_cosq_gport_connection_t *gport_connect);

#endif /* BCM_HIDE_DISPATCHABLE */

/* delay tolerance configuration */
typedef struct bcm_cosq_delay_tolerance_s {
    int credit_request_watchdog_status_msg_gen; /* Watch Dog Status Message Generation
                                           Period. When the Watch Dog Status
                                           Message Generation Period time passed
                                           since the last credit for an active
                                           Queue, the Queue will generate flow
                                           status message again. Range depends
                                           on mode. ARAD A supports 1-15 in
                                           aggressive status message credit
                                           watchdog mode, and 33-500 in the
                                           normal mode. (0 disables TH).
                                           Resolution: WD full cycle units. */
    int credit_request_watchdog_delete_queue_thresh; /* Watch Dog Delete Queue Threshold.
                                           When the Watch Dog Delete Queue
                                           Threshold time passed since the last
                                           credit for an active Queue, the Queue
                                           will be in Delete State. Range:
                                           100-500. (0 disables TH).  Not
                                           supported in aggressive status
                                           message credit watchdog mode of ARAD
                                           A. Units: milliseconds. Resolution:
                                           WD full cycle units. */
    int credit_request_hungry_off_to_slow_thresh; /* When (QsizeCrBal) >
                                           off_to_slow_thresh, and CRS==OFF, CRS
                                           may be changed to SLOW. Resolution in
                                           bytes. Range: (-229376) - (229376).
                                           Resolution: 1 Byte. */
    int credit_request_hungry_off_to_normal_thresh; /* When (QsizeCrBal) >
                                           off_to_normal_thresh, and CRS==OFF,
                                           CRS may be changed to NORM.
                                           Resolution in bytes. Range: (-229376)
                                           - (229376). Resolution: 1 Byte. */
    int credit_request_hungry_slow_to_normal_thresh; /* When (QsizeCrBal) >
                                           slow_to_normal_thresh, and CRS==SLOW,
                                           CRS may be changed to NORM.
                                           Resolution in bytes.  Range:
                                           (-229376) - (229376). Resolution: 1
                                           Byte. */
    int credit_request_hungry_normal_to_slow_thresh; /* When (QsizeCrBal) <
                                           normal_to_slow_th, and CRS==NORM, CRS
                                           may be changed to SLOW. Resolution in
                                           bytes. Range: (-229376) - (229376).
                                           Resolution: 1 Byte. */
    int credit_request_hungry_multiplier; /* When queue size crosses a multiply of
                                           multiplier a new FlowStatus Cell is
                                           generated. Resolution in bytes.
                                           Range: 2^5  2^12. (2^4  disables
                                           mechanism). */
    int credit_request_satisfied_backoff_enter_thresh; /* When the Credit Balance is bigger
                                           than the threshold, the device sends
                                           OFF message to the scheduler. This is
                                           to prevent credit accumulation from a
                                           certain threshold. Resolution in
                                           bytes. Range: 0  491520. Resolution:
                                           1 Byte. */
    int credit_request_satisfied_backoff_exit_thresh; /* Hysteresis value for to the Backoff
                                           Enter. Resolution in bytes. Range: 0 
                                           491520. Resolution: 1 Byte. */
    int credit_request_satisfied_backlog_enter_thresh; /* When the Credit Balance is bigger
                                           Backlog Enter threshold bytes than
                                           the queue size, the device sends OFF
                                           message to the scheduler. This
                                           threshold acts as Slow/Norm to off
                                           threshold. Resolution in bytes.
                                           Range: 0  491520. Resolution: 1 Byte. */
    int credit_request_satisfied_backlog_exit_thresh; /* Hysteresis value for to the Backlog
                                           Enter. Resolution in bytes. Range: 0 
                                           491520. Resolution: 1 Byte. */
    int credit_request_satisfied_empty_queue_thresh; /* When Qsize==0 and CrBal >=
                                           satisfied_empty_q_th, the CRS is
                                           changed to OFF. This threshold is a
                                           specific case of
                                           PETRA_ITM_CR_REQUEST_CR_BALANCE_TH.
                                           backlog_enter_th threshold.
                                           Resolution in bytes. Range: 32768 
                                           32767. */
    int credit_request_satisfied_empty_queue_max_balance_thresh; /* Max Empty Queue Credit Balance. This
                                           value is the maximum credits an empty
                                           queue can accumulate. Resolution in
                                           bytes. Range: 32768  32767. */
    int credit_request_satisfied_empty_queue_exceed_thresh; /* Exceed Max Empty Queue Credit
                                           Balance. This indication permits the
                                           credit balance of an empty queue to
                                           exceed configured Exceed Max Empty
                                           Queue Credit Balance up to (Credit
                                           Value minus 1), when a credit is
                                           received. This is used to prevent the
                                           deletion of partial credits. */
    uint32 flags;                       /* flags for the API */
} bcm_cosq_delay_tolerance_t;

/* 
 * tolerance level related flags specified in the flags field of
 * bcm_cosq_delay_tolerance_t.
 */
#define BCM_COSQ_DELAY_TOLERANCE_REMOTE_CREDIT_VALUE 1          /* Specifies that the
                                                          profile works with the
                                                          remote credit value,
                                                          works only in specific
                                                          device types */
#define BCM_COSQ_DELAY_TOLERANCE_IS_LOW_LATENCY 2          /* Specifies that the
                                                          profile is for low
                                                          latency queues
                                                          enabling multiple
                                                          packet dequeues */

#ifndef BCM_HIDE_DISPATCHABLE

/* setting delay tolerance */
extern int bcm_cosq_delay_tolerance_level_set(
    int unit, 
    int delay_tolerance_level, 
    bcm_cosq_delay_tolerance_t *delay_tolerance);

/* retreiving delay tolerance */
extern int bcm_cosq_delay_tolerance_level_get(
    int unit, 
    int delay_tolerance_level, 
    bcm_cosq_delay_tolerance_t *delay_tolerance);

/* mapping {traffic class, dp} to a egress queue on a port */
extern int bcm_cosq_gport_egress_map_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_t ingress_pri, 
    bcm_color_t ingress_dp, 
    bcm_cos_queue_t offset);

/* 
 * retreiving the egress queue on a port to which {traffic class, dp} is
 * mapped
 */
extern int bcm_cosq_gport_egress_map_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_t ingress_pri, 
    bcm_color_t ingress_dp, 
    bcm_cos_queue_t *offset);

#endif /* BCM_HIDE_DISPATCHABLE */

/* flag values for multicast config setting */
#define BCM_COSQ_MULTICAST_SCHEDULED    0x00000001 /* multicast scheduled values
                                                      are valid */
#define BCM_COSQ_MULTICAST_UNSCHEDULED  0x00000002 /* multicast unscheduled
                                                      values are valid */

/* multicast configuration settings */
typedef enum bcm_cosq_egress_multicast_service_pools_e {
    bcmCosqEgressMulticastServicePool0 = 0, /* Service pool 0 identifier */
    bcmCosqEgressMulticastServicePool1 = 1 /* Service pool 1 identifier */
} bcm_cosq_egress_multicast_service_pools_t;

/* multicast configuration settings */
typedef struct bcm_cosq_egress_multicast_config_s {
    bcm_color_t scheduled_dp;   /* drop precedence */
    bcm_cos_t priority;         /* TC */
    int unscheduled_se;         /* shared resource eligibility */
    int unscheduled_sp;         /* service pool ID */
} bcm_cosq_egress_multicast_config_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* 
 * mapping {traffic class, dp} to multicast egress configuration on a
 * port
 */
extern int bcm_cosq_gport_egress_multicast_config_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_t ingress_pri, 
    bcm_color_t ingress_dp, 
    uint32 flags, 
    bcm_cosq_egress_multicast_config_t *config);

/* 
 * retreiving the egress multicast configuration on a port to which
 * {traffic class, dp} is mapped
 */
extern int bcm_cosq_gport_egress_multicast_config_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_t ingress_pri, 
    bcm_color_t ingress_dp, 
    uint32 flags, 
    bcm_cosq_egress_multicast_config_t *config);

#endif /* BCM_HIDE_DISPATCHABLE */

/* flag values for VSQ creation */
#define BCM_COSQ_VSQ_GL         0x00000001 /* create 1 global VSQ */
#define BCM_COSQ_VSQ_CT         0x00000002 /* create according to Category */
#define BCM_COSQ_VSQ_CTTC       0x00000004 /* create according to Category *
                                              Traffic-Class */
#define BCM_COSQ_VSQ_CTCC       0x00000008 /* create according to Category *
                                              Connection-Class */
#define BCM_COSQ_VSQ_PP         0x00000010 /* create according to
                                              ST-VSQ-Pointer, arrived from the
                                              field processor or external PP */
#define BCM_COSQ_VSQ_LLFC       0x00000020 /* create according to Source Network
                                              Port */
#define BCM_COSQ_VSQ_PFC        0x00000040 /* create according to Packet
                                              Priority */

/* VSQ info settings */
typedef struct bcm_cosq_vsq_info_s {
    uint32 flags;           /* flags for vsq info */
    int ct_id;              /* Category ID. Relevant when flag is CT/CTTC/CTCC */
    int cc_id;              /* Connection Class ID. Relevant when flag is CTCC */
    int traffic_class;      /* VSQ Traffic Class ID. The VSQ traffic class ID
                               only relevant for the VSQ mapping and doesn't
                               remap the system TC. Relevant when flag is CTTC */
    bcm_gport_t src_port;   /* Source Physical port ID. The network interface ID
                               that the packet arrived from. Relevant when flag
                               is LLFC, PFC */
    int pp_vsq_id;          /* The ID of the VSQ, in the PP space. Relevant when
                               flag PP is set. In this case, the user specifies
                               the ST-VSQ-Pointer in the range 0-255 from the
                               FP/PP that needs to be mapped to the VSQ */
} bcm_cosq_vsq_info_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* Create the VSQ */
extern int bcm_cosq_gport_vsq_create(
    int unit, 
    bcm_cosq_vsq_info_t *vsq_info, 
    bcm_gport_t *vsq_gport);

/* Destroy the VSQ */
extern int bcm_cosq_gport_vsq_destroy(
    int unit, 
    bcm_gport_t vsq_gport);

/* adding queue to vsq */
extern int bcm_cosq_gport_vsq_add(
    int unit, 
    bcm_gport_t vsq, 
    bcm_gport_t queue, 
    bcm_cos_queue_t cosq);

/* deleting queue from vsq */
extern int bcm_cosq_gport_vsq_delete(
    int unit, 
    bcm_gport_t vsq, 
    bcm_gport_t queue, 
    bcm_cos_queue_t cosq);

/* deleting all queues from vsq */
extern int bcm_cosq_gport_vsq_delete_all(
    int unit, 
    bcm_gport_t vsq);

/* retreiving queues that are part of vsq */
extern int bcm_cosq_gport_vsq_get(
    int unit, 
    bcm_gport_t vsq, 
    int queue_max, 
    bcm_gport_t *queue_array, 
    bcm_cos_queue_t *cosq_array, 
    int *queue_count);

#endif /* BCM_HIDE_DISPATCHABLE */

/* flag values for threshold setting */
#define BCM_COSQ_THRESHOLD_PER_DP           0x00000001 /* dp field meaningful */
#define BCM_COSQ_THRESHOLD_INGRESS          0x00000002 /* device level ingress
                                                          thresholds */
#define BCM_COSQ_THRESHOLD_EGRESS           0x00000004 /* device level egress
                                                          thresholds */
#define BCM_COSQ_THRESHOLD_UNICAST          0x00000008 /* device level unicast
                                                          thresholds */
#define BCM_COSQ_THRESHOLD_MULTICAST        0x00000010 /* device level multicast
                                                          thresholds */
#define BCM_COSQ_THRESHOLD_SET              0x00000020 /* threshold for assert
                                                          condition (where
                                                          applicable) */
#define BCM_COSQ_THRESHOLD_CLEAR            0x00000040 /* threshold for
                                                          de-assert (where
                                                          applicable) */
#define BCM_COSQ_THRESHOLD_NOT_COMMIT       0x00000080 /* to aid in template
                                                          management */
#define BCM_COSQ_THRESHOLD_FLOW_CONTROL     0x00000100 /* flow control */
#define BCM_COSQ_THRESHOLD_DROP             0x00000200 /* Admission Control */
#define BCM_COSQ_THRESHOLD_MULTICAST_SP0    0x00000400 /* Multicast Service-Pool
                                                          0 */
#define BCM_COSQ_THRESHOLD_MULTICAST_SP1    0x00000800 /* Multicast Service-Pool
                                                          1 */
#define BCM_COSQ_THRESHOLD_COLOR_SYSTEM_RED 0x00001000 /* Set Color System red
                                                          format */
#define BCM_COSQ_THRESHOLD_RANGE_0          0x00002000 /* Set Range 0 threshold,
                                                          where threshold value
                                                          indicates the max size
                                                          of the specific range */
#define BCM_COSQ_THRESHOLD_RANGE_1          0x00004000 /* Set Range 1 threshold,
                                                          where threshold value
                                                          indicates the max size
                                                          of the specific range */
#define BCM_COSQ_THRESHOLD_RANGE_2          0x00008000 /* Set Range 2 threshold,
                                                          where threshold value
                                                          indicates the max size
                                                          of the specific range */
#define BCM_COSQ_THRESHOLD_RANGE_3          0x00010000 /* Set Range 3 threshold,
                                                          where threshold value
                                                          indicates the max size
                                                          of the specific range */
#define BCM_COSQ_THRESHOLD_OCB              0x00020000 /* On-Chip buffer */

/* threshold type enumerartions */
typedef enum bcm_cosq_threshold_type_e {
    bcmCosqThresholdBytes = 0,          /* consumed bytes. Egress Drop
                                           threshold, Unicast, multicast, dp
                                           (multicast) at port and device level.
                                           Egress Flow control threshold,
                                           unicast , multicast, port, channel
                                           and device level. */
    bcmCosqThresholdPacketDescriptors = 1, /* consumed packet descriptors. Egress
                                           drop threshold, unicast, multicast,
                                           dp (multicast) at port level. Egress
                                           Flow control threshold, unicast,
                                           multicast device level. */
    bcmCosqThresholdPackets = 2,        /* consumed packets. Egress Drop
                                           threshold, Unicast, multicast,
                                           dp(multicast) at device level. Egress
                                           Flow control threshold, multicast at
                                           device level. */
    bcmCosqThresholdDataBuffers = 3,    /* consumed data buffers. Egress Drop
                                           threshold, multicast, dp at device
                                           level Egress Flow control threshold,
                                           unicast, multicast at device level. */
    bcmCosqThresholdAvailablePacketDescriptors = 4, /* available Packet Descriptors. Egress
                                           Drop threshold, Unicast, multicast,
                                           dp (multicast) at port and device
                                           level. */
    bcmCosqThresholdAvailableDataBuffers = 5, /* available data buffers. Egress Drop
                                           threshold, multicast, dp at device
                                           level. */
    bcmCosqThresholdBufferDescriptorBuffers = 6, /* consumed Buffer descriptor Buffers.
                                           Ingress Drop threshold, DP at device
                                           level. Ingress Flow control threshold
                                           at device level. */
    bcmCosqThresholdBufferDescriptors = 7, /* consumed buffer descriptors. Ingress
                                           Drop threshold, DP at device level. */
    bcmCosqThresholdDbuffs = 8,         /* consumed Dbuffs. Ingress Drop
                                           threshold, DP, unicast at device
                                           level. Ingress flow control
                                           threshold, unicast, multicast at
                                           device level. */
    bcmCosqThresholdFullDbuffs = 9,     /* consumed Full Dbuffs. Ingress Drop
                                           threshold, DP, multicast at device
                                           level. */
    bcmCosqThresholdMiniDbuffs = 10,    /* consumed mini Dbuffs. Ingress Drop
                                           threshold, DP, multicast at device
                                           level. */
    bcmCosqThresholdDynamicWeight = 11  /* Dynamic scheduling threshold. */
} bcm_cosq_threshold_type_t;

/* flag values for threshold setting valid bitmap */
#define BCM_COSQ_THRESHOLD_VALID_DP         0x00000001 /* dp field should be be
                                                          used */
#define BCM_COSQ_THRESHOLD_VALID_VALUE      0x00000002 /* value field should be
                                                          be used */
#define BCM_COSQ_THRESHOLD_VALID_TC         0x00000004 /* tc field should be be
                                                          used */
#define BCM_COSQ_THRESHOLD_VALID_VSQ_CATEGORY 0x00000008 /* vsq category field
                                                          should be be used */

/* flow control / addmission settings */
typedef struct bcm_cosq_threshold_s {
    uint32 flags;                   /* BCM_COSQ_THRESHOLD_* flag values */
    bcm_color_t dp;                 /* drop precedence. relevant for
                                       BCM_COSQ_THRESHOLD_PER_DP flag value */
    bcm_cosq_threshold_type_t type; /* threshold type */
    int value;                      /* threshold value for drop/flow control */
    int tc;                         /* traffic class for which the thresholds
                                       are to be configured */
    int vsq_category;               /* VSQ category for which the thresholds are
                                       to be configured */
    uint32 valid;                   /* a bitmap representing enabled fields in
                                       the struct. */
} bcm_cosq_threshold_t;

/* Initialize a COSQ threshold structure. */
extern void bcm_cosq_threshold_t_init(
    bcm_cosq_threshold_t *threshold);

#ifndef BCM_HIDE_DISPATCHABLE

/* 
 * Configuring Ingress / egress Thresholds for Flow control and Admission
 * Control
 */
extern int bcm_cosq_gport_threshold_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_threshold_t *threshold);

/* 
 * Retreiving Ingress / egress Thresholds for Flow control and Admission
 * Control
 */
extern int bcm_cosq_gport_threshold_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_threshold_t *threshold);

#endif /* BCM_HIDE_DISPATCHABLE */

/* the source of empty status for CoSQ scheduler */
typedef enum bcm_cosq_sched_empty_e {
    bcmCosqSchedEmptyTxQueue = 0,   /* Empty from Tx Queue */
    bcmCosqSchedEmptyTxqShaper = 1, /* Empty from TxQ shaper */
    bcmCosqSchedEmptyCount = 2      /* Must be the last. Not a usable value. */
} bcm_cosq_sched_empty_t;

/* cosq gport type eumerations */
typedef enum bcm_cosq_gport_type_e {
    bcmCosqGportTypeE2EPort = 0,        /* Ports in E2E hierarchy */
    bcmCosqGportTypeUnicastEgress = 1,  /* Unicast Egress Queues - Port
                                           hierarchy */
    bcmCosqGportTypeMulticastEgress = 2, /* Multicast Egress Queues - Port
                                           Hierarchy */
    bcmCosqGportTypeCompositeFlow2 = 3, /* 2nd  flow of either composite
                                           connector or composite SE */
    bcmCosqGportTypeSchedCIR = 4,       /* SE(scheduling Element) of CIR type.
                                           Applicable for Dual Shaper SE */
    bcmCosqGportTypeSchedPIR = 5,       /* SE(scheduling Element) of CIR type.
                                           Applicable for Dual Shaper SE */
    bcmCosqGportTypeLocalPort = 6,      /* Ports in Egress transmit hierarchy */
    bcmCosqGportTypeLocalPortTC = 7,    /* Port TC level in Egress transmit
                                           hierarchy */
    bcmCosqGportTypeLocalPortTCG = 8,   /* Port TC Group level in Egress
                                           transmit hierarchy */
    bcmCosqGportTypeE2EPortTC = 9,      /* Port TC level in End-to-End hierarchy */
    bcmCosqGportTypeE2EPortTCG = 10,    /* Port TC Group level in End-to-End
                                           hierarchy */
    bcmCosqGportTypeGlobalFmqRoot = 11, /* FMQ Root gport. TypeGlobal indicates
                                           single instance */
    bcmCosqGportTypeGlobalFmqGuaranteed = 12, /* FMQ Guaranteed gport */
    bcmCosqGportTypeGlobalFmqBestEffortAggregate = 13, /* FMQ Best Effort aggregate gport */
    bcmCosqGportTypeGlobalFmqBestEffort0 = 14, /* FMQ Best Effort 0 gport */
    bcmCosqGportTypeGlobalFmqBestEffort1 = 15, /* FMQ Best Effort 1 gport */
    bcmCosqGportTypeGlobalFmqBestEffort2 = 16, /* FMQ Best Effort 2 gport */
    bcmCosqGportTypeGlobalFmqClass1 = 17, /* FMQ Class 1 gport */
    bcmCosqGportTypeGlobalFmqClass2 = 18, /* FMQ Class 2 gport */
    bcmCosqGportTypeGlobalFmqClass3 = 19, /* FMQ Class 3 gport */
    bcmCosqGportTypeGlobalFmqClass4 = 20, /* FMQ Class 4 gport */
    bcmCosqGportTypeGlobalIsqRoot = 21, /* ISQ Root gport */
    bcmCosqGportTypeGlobalFabricMeshLocal = 22, /* Ingress Mesh Scheduler - Local */
    bcmCosqGportTypeGlobalFabricMeshDev1 = 23, /* Ingress Mesh Scheduler - Destination
                                           Device 1 */
    bcmCosqGportTypeGlobalFabricMeshDev2 = 24, /* Ingress Mesh Scheduler - Destination
                                           Device 2 */
    bcmCosqGportTypeGlobalFabricMeshDev3 = 25, /* Ingress Mesh Scheduler - Destination
                                           Device 3 */
    bcmCosqGportTypeGlobalFabricMeshDev4 = 26, /* Ingress Mesh Scheduler - Destination
                                           Device 4 */
    bcmCosqGportTypeGlobalFabricMeshDev5 = 27, /* Ingress Mesh Scheduler - Destination
                                           Device 5 */
    bcmCosqGportTypeGlobalFabricMeshDev6 = 28, /* Ingress Mesh Scheduler - Destination
                                           Device 6 */
    bcmCosqGportTypeGlobalFabricMeshDev7 = 29, /* Ingress Mesh Scheduler - Destination
                                           Device 7 */
    bcmCosqGportTypeGlobalFabricClosUnicastLocal = 30, /* Ingress Clos Fabric scheduler -
                                           shaper e (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosUnicastLocalLow = 31, /* Ingress Clos Fabric scheduler - WFQ 3
                                           (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosUnicastLocalHigh = 32, /* Ingress Clos Fabric scheduler -
                                           shaper a and WFQ 2 (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosFabric = 33, /* Ingress Clos Fabric scheduler -
                                           shaper f (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosFabricHigh = 34, /* Ingress Clos Fabric scheduler - WFQ 2
                                           (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosFabricLow = 35, /* Ingress Clos Fabric scheduler - WFQ 3
                                           (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricHigh = 36, /* Ingress Clos Fabric scheduler -
                                           shaper b and WFQ 4 (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricLow = 37, /* Ingress Clos Fabric scheduler - WFQ 5
                                           (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosFmqGuaranteed = 38, /* Ingress Clos Fabric scheduler -
                                           shaper c and WFQ 4 (Ref Arch Spec) */
    bcmCosqGportTypeGlobalFabricClosFmqBestEffort = 39, /* Ingress Clos Fabric scheduler - WFQ 5
                                           (Ref Arch Spec) */
    bcmCosqGportTypeSched = 40,         /* SE(scheduling Element) */
    bcmCosqGportTypeGlobalSystemRed = 41, /* System RED gport */
    bcmCosqGportTypeFabricPipe = 42,    /* Fabric all pipes */
    bcmCosqGportTypeFabricPipeEgress = 43, /* Fabric egress pipes */
    bcmCosqGportTypeFabricPipeIngress = 44, /* Fabric ingress pipes */
    bcmCosqGportTypeFabricPipeMiddle = 45, /* Fabric middle pipes */
    bcmCosqGportTypeGlobalFabricMeshCommonLocal0 = 46, /* Mesh common local 0 */
    bcmCosqGportTypeGlobalFabricMeshCommonLocal1 = 47, /* Mesh common local 1 */
    bcmCosqGportTypeGlobalFabricMeshCommonDev1 = 48, /* Mesh common dev 1 */
    bcmCosqGportTypeGlobalFabricMeshCommonDev2 = 49, /* Mesh common dev 2 */
    bcmCosqGportTypeGlobalFabricMeshCommonDev3 = 50, /* Mesh common dev 3 */
    bcmCosqGportTypeGlobalFabricMeshCommonMc = 51, /* Mesh common multicast */
    bcmCosqGportTypeGlobalFabricClosCommonLocal0 = 52, /* Clos common local 0 */
    bcmCosqGportTypeGlobalFabricClosCommonLocal1 = 53, /* Clos common local 1 */
    bcmCosqGportTypeGlobalFabricClosCommonFabric = 54, /* Clos common fabric */
    bcmCosqGportTypeGlobalFabricClosCommonUnicastFabric = 55, /* Clos common unicast fabric */
    bcmCosqGportTypeGlobalFabricClosCommonMulticastFabric = 56, /* Clos common multicast fabric */
    bcmCosqGportTypeGlobalFabricMeshLocal0OcbHigh = 57, /* Mesh local 0 ocb high */
    bcmCosqGportTypeGlobalFabricMeshLocal0OcbLow = 58, /* Mesh local 0 ocb low */
    bcmCosqGportTypeGlobalFabricMeshLocal0MixHigh = 59, /* Mesh local 0 mix high */
    bcmCosqGportTypeGlobalFabricMeshLocal0MixLow = 60, /* Mesh local 0 mix low */
    bcmCosqGportTypeGlobalFabricMeshLocal1OcbHigh = 61, /* Mesh local 1 ocb high */
    bcmCosqGportTypeGlobalFabricMeshLocal1OcbLow = 62, /* Mesh local 1 ocb low */
    bcmCosqGportTypeGlobalFabricMeshLocal1MixHigh = 63, /* Mesh local 1 mix high */
    bcmCosqGportTypeGlobalFabricMeshLocal1MixLow = 64, /* Mesh local 1 mix low */
    bcmCosqGportTypeGlobalFabricMeshDev1OcbHigh = 65, /* Mesh device 1 ocb high */
    bcmCosqGportTypeGlobalFabricMeshDev1OcbLow = 66, /* Mesh device 1 ocb low */
    bcmCosqGportTypeGlobalFabricMeshDev1MixHigh = 67, /* Mesh device 1 mix high */
    bcmCosqGportTypeGlobalFabricMeshDev1MixLow = 68, /* Mesh device 1 mix low */
    bcmCosqGportTypeGlobalFabricMeshDev2OcbHigh = 69, /* Mesh device 2 ocb high */
    bcmCosqGportTypeGlobalFabricMeshDev2OcbLow = 70, /* Mesh device 2 ocb low */
    bcmCosqGportTypeGlobalFabricMeshDev2MixHigh = 71, /* Mesh device 2 mix high */
    bcmCosqGportTypeGlobalFabricMeshDev2MixLow = 72, /* Mesh device 2 mix low */
    bcmCosqGportTypeGlobalFabricMeshDev3OcbHigh = 73, /* Mesh device 3 ocb high */
    bcmCosqGportTypeGlobalFabricMeshDev3OcbLow = 74, /* Mesh device 3 ocb low */
    bcmCosqGportTypeGlobalFabricMeshDev3MixHigh = 75, /* Mesh device 3 mix high */
    bcmCosqGportTypeGlobalFabricMeshDev3MixLow = 76, /* Mesh device 3 mix low */
    bcmCosqGportTypeGlobalFabricMeshMcOcbHigh = 77, /* Mesh multicast ocb high */
    bcmCosqGportTypeGlobalFabricMeshMcOcbLow = 78, /* Mesh multicast ocb low */
    bcmCosqGportTypeGlobalFabricMeshMcMixHigh = 79, /* Mesh multicast mix high */
    bcmCosqGportTypeGlobalFabricMeshMcMixLow = 80, /* Mesh multicast mix low */
    bcmCosqGportTypeGlobalFabricMeshLocal0 = 81, /* Mesh local 0 */
    bcmCosqGportTypeGlobalFabricMeshLocal1 = 82, /* Mesh local 1 */
    bcmCosqGportTypeGlobalFabricMeshMc = 83, /* Mesh multicast */
    bcmCosqGportTypeGlobalFabricMesh = 84, /* Mesh */
    bcmCosqGportTypeGlobalFabricClosLocal0OcbHigh = 85, /* Clos local 0 ocb high */
    bcmCosqGportTypeGlobalFabricClosLocal0OcbLow = 86, /* Clos local 0 ocb low */
    bcmCosqGportTypeGlobalFabricClosLocal0MixHigh = 87, /* Clos local 0 mix high */
    bcmCosqGportTypeGlobalFabricClosLocal0MixLow = 88, /* Clos local 0 mix low */
    bcmCosqGportTypeGlobalFabricClosLocal1OcbHigh = 89, /* Clos local 1 ocb high */
    bcmCosqGportTypeGlobalFabricClosLocal1OcbLow = 90, /* Clos local 1 ocb low */
    bcmCosqGportTypeGlobalFabricClosLocal1MixHigh = 91, /* Clos local 1 mix high */
    bcmCosqGportTypeGlobalFabricClosLocal1MixLow = 92, /* Clos local 1 mix low */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricOcbHigh = 93, /* Clos unicast ocb high */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricOcbLow = 94, /* Clos unicast ocb low */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricMixHigh = 95, /* Clos unicast mix high */
    bcmCosqGportTypeGlobalFabricClosUnicastFabricMixLow = 96, /* Clos unicast mix low */
    bcmCosqGportTypeGlobalFabricClosFmqGuaranteedOcb = 97, /* Clos guaranteed multicast ocb */
    bcmCosqGportTypeGlobalFabricClosFmqBestEffortOcb = 98, /* Clos best effort multicast ocb */
    bcmCosqGportTypeGlobalFabricClosFmqGuaranteedMix = 99, /* Clos guaranteed multicast mix */
    bcmCosqGportTypeGlobalFabricClosFmqBestEffortMix = 100, /* Clos best effort multicast mix */
    bcmCosqGportTypeGlobalFabricClosLocal0 = 101, /* Clos local 0 */
    bcmCosqGportTypeGlobalFabricClosLocal1 = 102, /* Clos local 1 */
    bcmCosqGportTypeGlobalFabricClosLocal0High = 103, /* Clos local 0 high */
    bcmCosqGportTypeGlobalFabricClosLocal0Low = 104, /* Clos local 0 low */
    bcmCosqGportTypeGlobalFabricClosLocal1High = 105, /* Clos local 1 high */
    bcmCosqGportTypeGlobalFabricClosLocal1Low = 106, /* Clos local 1 low */
    bcmCosqGportTypeGlobalFabricClosOcbHigh = 107, /* Clos ocb high */
    bcmCosqGportTypeGlobalFabricClosMixHigh = 108, /* Clos mix high */
    bcmCosqGportTypeGlobalFabricClosOcbLow = 109, /* Clos ocb low */
    bcmCosqGportTypeGlobalFabricClosMixLow = 110, /* Clos mix low */
    bcmCosqGportTypeGlobalFabricClos = 111 /* Clos */
} bcm_cosq_gport_type_t;

/* gport information related to getting a handle */
typedef struct bcm_cosq_gport_info_s {
    bcm_gport_t in_gport;   /* gport to be converted. NULL for global gports
                               (i.e. single instance on a device) */
    bcm_cos_queue_t cosq;   /* Num of cosq levels */
    bcm_gport_t out_gport;  /* retreived gport */
} bcm_cosq_gport_info_t;

/* gport information related to getting a handle */
typedef struct bcm_cosq_gport_info_core_s {
    bcm_cosq_gport_type_t gport_type;   /* cosq gport type enumeration */
    bcm_gport_t in_gport;               /* gport to be converted. NULL for
                                           global gports (i.e. single instance
                                           on a device) */
    bcm_cos_queue_t cosq;               /* Num of cosq levels */
    uint32 flags;                       /* relevant flags */
} bcm_cosq_gport_info_core_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* 
 * Getting a gport handle. This could be either a global gport (single
 * instance on a device) or converting a gport to the desired type
 */
extern int bcm_cosq_gport_handle_get(
    int unit, 
    bcm_cosq_gport_type_t gport_type, 
    bcm_cosq_gport_info_t *gport_info);

/* 
 * Getting a gport handle per core. This could be either a global gport
 * (single instance on a device) or converting a gport to the desired
 * type.
 */
extern int bcm_cosq_gport_handle_core_get(
    int unit, 
    int core, 
    bcm_cosq_gport_info_core_t *gport_info, 
    bcm_gport_t *out_gport);

#endif /* BCM_HIDE_DISPATCHABLE */

/* flow control direction type eumerations */
typedef enum bcm_cosq_fc_direction_type_e {
    bcmCosqFlowControlGeneration = 0,   /* flow control generation */
    bcmCosqFlowControlReception = 1     /* flow control reception */
} bcm_cosq_fc_direction_type_t;

/* flag values for flow control path configuration */
#define BCM_COSQ_FC_ENDPOINT_PORT_ALL       0x00000001 /* all ports as endpoint,
                                                          e.g. generate flow
                                                          control on all
                                                          interfaces */
#define BCM_COSQ_FC_ENDPOINT_PORT_IMPLICIT  0x00000002 /* endpoint not
                                                          specified. It is
                                                          implicitly specified.
                                                          e.g. for flow control
                                                          generation based on
                                                          in-band VSQ the target
                                                          endpoint is determined
                                                          by the VSQ interface
                                                          attribute */
#define BCM_COSQ_FC_INHERIT_UP              0x00000004 /* also applies flow
                                                          control to all cos
                                                          levels greater then
                                                          that specified via
                                                          flow control endpoint */
#define BCM_COSQ_FC_INHERIT_DOWN            0x00000008 /* also applies flow
                                                          control to all cos
                                                          levels lower then that
                                                          specified via flow
                                                          control endpoint */
#define BCM_COSQ_FC_RETRANSMIT              0x00000010 /* ILKN Retransmit -
                                                          relevant for both FC
                                                          directions */
#define BCM_COSQ_FC_HCFC_BITMAP             0x00000020 /* HCFC Bitmap */

/* Endpoint(source or reaction/target) definition */
typedef struct bcm_cosq_fc_endpoint_s {
    uint32 flags;           /* flags to qualify a endpoint */
    bcm_gport_t port;       /* gport identifing the underlying resource */
    bcm_cos_queue_t cosq;   /* cosq/class */
    int calender_index;     /* calender entry */
    int priority;           /* priority. Example, E2E Scheduler Element priority
                               level - for mapping flow control to E2E SE
                               (Scheduler Element) */
} bcm_cosq_fc_endpoint_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* configure flow control path */
extern int bcm_cosq_fc_path_add(
    int unit, 
    bcm_cosq_fc_direction_type_t fc_direction, 
    bcm_cosq_fc_endpoint_t *source, 
    bcm_cosq_fc_endpoint_t *target);

/* retreive flow control path information */
extern int bcm_cosq_fc_path_get(
    int unit, 
    bcm_cosq_fc_direction_type_t fc_direction, 
    bcm_cosq_fc_endpoint_t *source, 
    int target_max, 
    bcm_cosq_fc_endpoint_t *target, 
    int *target_count);

/* delete flow control path configuration */
extern int bcm_cosq_fc_path_delete(
    int unit, 
    bcm_cosq_fc_direction_type_t fc_direction, 
    bcm_cosq_fc_endpoint_t *source, 
    bcm_cosq_fc_endpoint_t *target);

extern int bcm_cosq_gport_destmod_attach(
    int unit, 
    bcm_gport_t gport, 
    bcm_port_t ingress_port, 
    bcm_module_t dest_modid, 
    int fabric_egress_port);

extern int bcm_cosq_gport_destmod_detach(
    int unit, 
    bcm_gport_t gport, 
    bcm_port_t ingress_port, 
    bcm_module_t dest_modid, 
    int fabric_egress_port);

extern int bcm_cosq_gport_multipath_add(
    int unit, 
    bcm_gport_t multipath_gport, 
    bcm_gport_t member_gport, 
    bcm_cos_queue_t member_gport_cosq);

extern int bcm_cosq_gport_multipath_get(
    int unit, 
    bcm_gport_t multipath_gport, 
    int member_gport_max, 
    bcm_gport_t *member_gport_array, 
    bcm_cos_queue_t *member_gport_cosq_array, 
    int *member_gport_count);

extern int bcm_cosq_gport_multipath_delete(
    int unit, 
    bcm_gport_t multipath_gport, 
    bcm_gport_t member_gport, 
    bcm_cos_queue_t member_gport_cosq);

#endif /* BCM_HIDE_DISPATCHABLE */

/* For queue report thresholds on EPON */
typedef struct bcm_cosq_report_threshold_s {
    int threshold0; /* Queue report threshold0. */
    int threshold1; /* Queue report threshold1. */
    int threshold2; /* Queue report threshold2. */
    int threshold3; /* Queue report threshold3. */
} bcm_cosq_report_threshold_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_report_threshold_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_report_threshold_t *threshold);

extern int bcm_cosq_gport_report_threshold_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_report_threshold_t *threshold);

#endif /* BCM_HIDE_DISPATCHABLE */

/* XGS3 cosq counters */
typedef enum bcm_cosq_stat_e {
    bcmCosqStatDroppedPackets = 0,      /* Dropped packet count. */
    bcmCosqStatDroppedBytes = 1,        /* Dropped byte count. */
    bcmCosqStatYellowCongestionDroppedPackets = 2, /* Dropped yellow packets due to
                                           congestion. */
    bcmCosqStatRedCongestionDroppedPackets = 3, /* Dropped red packets due to
                                           congestion. */
    bcmCosqStatGreenDiscardDroppedPackets = 4, /* WRED green packets. */
    bcmCosqStatYellowDiscardDroppedPackets = 5, /* WRED yellow packets. */
    bcmCosqStatRedDiscardDroppedPackets = 6, /* WRED red packets. */
    bcmCosqStatOutPackets = 7,          /* Transmit packet count. */
    bcmCosqStatOutBytes = 8,            /* Transmit byte count. */
    bcmCosqStatIeee8021CnCpTransmittedCnms = 9, /* QCN CNM Transmit packet count. */
    bcmCosqStatHighPriDroppedPackets = 10, /* PGW OBM high priority dropped packet
                                           count. */
    bcmCosqStatLowPriDroppedPackets = 11, /* PGW OBM low priority dropped packet
                                           count. */
    bcmCosqStatHighPriDroppedBytes = 12, /* PGW OBM high priority dropped bytes
                                           count. */
    bcmCosqStatLowPriDroppedBytes = 13, /* PGW OBM low priority dropped byte
                                           count. */
    bcmCosqStatGlobalHeadroomBytes0Peak = 14, /* Total Bytes used Global Headroom by X
                                           pipe Peak */
    bcmCosqStatGlobalHeadroomBytes0Current = 15, /* Total Bytes used Global Headroom by X
                                           pipe Current */
    bcmCosqStatGlobalHeadroomBytes1Peak = 16, /* Total Bytes used Global Headroom by Y
                                           pipe Peak */
    bcmCosqStatGlobalHeadroomBytes1Current = 17, /* Total Bytes used Global Headroom by Y
                                           pipe Current */
    bcmCosqStatIngressPortPoolSharedBytesPeak = 18, /* Peak value of shared buffers in use
                                           by all ports for each service pool in
                                           bytes. */
    bcmCosqStatIngressPortPoolSharedBytesCurrent = 19, /* Current value buffers in use by all
                                           ports for each service pool in bytes. */
    bcmCosqStatIngressPortPGMinBytesPeak = 20, /* Peak value of buffers in use from PG
                                           min space per port per PG in bytes. */
    bcmCosqStatIngressPortPGMinBytesCurrent = 21, /* Current value of buffers in use from
                                           PG min space per port per PG in
                                           bytes. */
    bcmCosqStatIngressPortPGSharedBytesPeak = 22, /* Peak value of buffers in use from
                                           shared space per port per PG in
                                           bytes. */
    bcmCosqStatIngressPortPGSharedBytesCurrent = 23, /* Current value of buffers in use from
                                           shared space per port per PG in
                                           bytes. */
    bcmCosqStatIngressPortPGHeadroomBytesPeak = 24, /* Peak value of  buffers in use from PG
                                           headroom space in bytes. */
    bcmCosqStatIngressPortPGHeadroomBytesCurrent = 25, /* Current value of  buffers in use from
                                           PG headroom space in bytes. */
    bcmCosqStatEgressMCQueueBytesPeak = 26, /* Peak value of  multicast queue
                                           buffers in use in bytes. */
    bcmCosqStatEgressMCQueueBytesCurrent = 27, /* Current value of  multicast queue
                                           buffers in use in bytes. */
    bcmCosqStatEgressUCQueueBytesPeak = 28, /* Peak value of unicast queue buffers
                                           in use in bytes. */
    bcmCosqStatEgressUCQueueBytesCurrent = 29, /* Current value of unicast queue
                                           buffers in use in bytes. */
    bcmCosqStatEgressUCQueuePortBytesPeak = 30, /* Peak value of  unicast queue shared
                                           buffer in use in bytes. */
    bcmCosqStatEgressUCQueuePortBytesCurrent = 31, /* Current value of unicast queue shared
                                           buffer in use in bytes. */
    bcmCosqStatDiscardDroppedPackets = 32 /* WRED dropped packets. */
} bcm_cosq_stat_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_stat_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint64 *value);

extern int bcm_cosq_stat_get32(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint32 *value);

extern int bcm_cosq_stat_sync_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint64 *value);

extern int bcm_cosq_stat_sync_get32(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint32 *value);

extern int bcm_cosq_stat_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint64 value);

extern int bcm_cosq_stat_set32(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_stat_t stat, 
    uint32 value);

#endif /* BCM_HIDE_DISPATCHABLE */

/* parameters for VOQ gport */
typedef struct bcm_cosq_congestion_info_s {
    bcm_module_t fabric_modid;  /* Fabric module ID. */
    bcm_port_t fabric_port;     /* Fabric module ID. */
    bcm_module_t dest_modid;    /* destination module ID. */
    bcm_port_t dest_port;       /* destination port ID. */
} bcm_cosq_congestion_info_t;

/* Initialize a COSQ congestion structure. */
extern void bcm_cosq_congestion_info_t_init(
    bcm_cosq_congestion_info_t *config);

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_gport_congestion_config_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_congestion_info_t *config);

extern int bcm_cosq_gport_congestion_config_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_cosq_congestion_info_t *config);

#endif /* BCM_HIDE_DISPATCHABLE */

typedef struct bcm_cos_pon_link_sla_s {
    int option;                 /* option flag(force report, etc). */
    int polling_level;          /* polling level 0 - 7. */
    uint32 tdm_rate;            /* TDM rate in kbps unit */
    uint32 tdm_grant_length;    /* TDM grant length in bytes */
} bcm_cos_pon_link_sla_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* Update EPON link SLA. */
extern int bcm_cosq_gport_pon_link_sla_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_pon_link_sla_t *link_sla);

/* Get EPON link SLA. */
extern int bcm_cosq_gport_pon_link_sla_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_pon_link_sla_t *link_sla);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Attribute flags for resource identifier. */
#define BCM_COSQ_DEVICE                 0x10000    /* device resource */
#define BCM_COSQ_DEVICE_EGRESS_POOL     0x20000    /* device egress service
                                                      pool. */
#define BCM_COSQ_DEVICE_INGRESS_POOL    0x40000    /* device ingress service
                                                      pool. */
#define BCM_COSQ_PORT_POOL              0x80000    /* port service pool. */
#define BCM_COSQ_PRIGROUP               0x100000   /* priority group. */
#define BCM_COSQ_HEADROOM               0x200000   /* headroom. */
#define BCM_COSQ_QUEUE                  0x400000   /* headroom. */
#define BCM_COSQ_STAT_CLEAR             0x800000   /* perform with clear-on-read */

/* BST Tracing statistics resources type eumerations. */
typedef enum bcm_bst_stat_id_e {
    bcmBstStatIdDevice = 0,             /* Per device BST tracing resource */
    bcmBstStatIdEgrPool = 1,            /* Per Egress Pool BST tracing resource */
    bcmBstStatIdEgrMCastPool = 2,       /* Per Egress Pool BST tracing
                                           resource(Multicast) */
    bcmBstStatIdIngPool = 3,            /* Per Ingress Pool BST tracing resource */
    bcmBstStatIdPortPool = 4,           /* Per Port Pool BST tracing resource */
    bcmBstStatIdPriGroupShared = 5,     /* Per Shared Priority Group Pool BST
                                           tracing resource */
    bcmBstStatIdPriGroupHeadroom = 6,   /* Per Priority Group Headroom BST
                                           tracing resource */
    bcmBstStatIdUcast = 7,              /* BST Tracing resource for unicast */
    bcmBstStatIdMcast = 8,              /* BST Tracing resource for multicast */
    bcmBstStatIdMaxCount = 9            /* Must be the last. Not a usable value. */
} bcm_bst_stat_id_t;

typedef struct bcm_cosq_bst_profile_s {
    uint32 byte; 
} bcm_cosq_bst_profile_t;

/* Initialize a CoSQ BST profile structure. */
extern void bcm_cosq_bst_profile_t_init(
    bcm_cosq_bst_profile_t *profile);

#ifndef BCM_HIDE_DISPATCHABLE

/* Set the profile for tracking. */
extern int bcm_cosq_bst_profile_set(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_bst_stat_id_t bid, 
    bcm_cosq_bst_profile_t *profile);

/* Set the profile for tracking. */
extern int bcm_cosq_bst_profile_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_bst_stat_id_t bid, 
    bcm_cosq_bst_profile_t *profile);

/* Sync HW stats to SW copy for all or given BST stats. */
extern int bcm_cosq_bst_stat_sync(
    int unit, 
    bcm_bst_stat_id_t bid);

#endif /* BCM_HIDE_DISPATCHABLE */

#define BCM_COSQ_WEIGHT_DISCRETE_WEIGHT_LEVEL0 -1         /* weight associated with
                                                          level 0 of scheduler
                                                          element having
                                                          discrete weight
                                                          attribute. */
#define BCM_COSQ_WEIGHT_DISCRETE_WEIGHT_LEVEL1 -2         /* weight associated with
                                                          level 1 of scheduler
                                                          element having
                                                          discrete weight
                                                          attribute. */
#define BCM_COSQ_WEIGHT_DISCRETE_WEIGHT_LEVEL2 -3         /* weight associated with
                                                          level 2 of scheduler
                                                          element having
                                                          discrete weight
                                                          attribute. */
#define BCM_COSQ_WEIGHT_DISCRETE_WEIGHT_LEVEL3 -4         /* weight associated with
                                                          level 3 of scheduler
                                                          element having
                                                          discrete weight
                                                          attribute. */

/* Various types of cosq classifiers */
typedef struct bcm_cosq_classifier_s {
    uint32 flags;       /* BCM_COSQ_CLASSIFIER_xxx flags */
    bcm_vlan_t vlan;    /* VLAN */
    bcm_mac_t mac;      /* MAC address */
    bcm_vrf_t vrf;      /* Virtual Router Instance */
    bcm_ip_t ip_addr;   /* IPv4 address */
    bcm_ip6_t ip6_addr; /* IPv6 address */
    bcm_gport_t gport;  /* GPORT ID */
} bcm_cosq_classifier_t;

/* Flags indicating classifier type */
#define BCM_COSQ_CLASSIFIER_WITH_ID 0x00000001 /* Classifier ID */
#define BCM_COSQ_CLASSIFIER_VLAN    0x00000002 /* Classifier consists of VLAN */
#define BCM_COSQ_CLASSIFIER_L2      0x00000004 /* Classifier consists of VLAN
                                                  and MAC address */
#define BCM_COSQ_CLASSIFIER_L3      0x00000008 /* Classifier consists of VRF and
                                                  IP address */
#define BCM_COSQ_CLASSIFIER_IP6     0x00000010 /* The IP address in L3
                                                  classifier is IPv6 */
#define BCM_COSQ_CLASSIFIER_GPORT   0x00000020 /* Classifier consists of GPORT */
#define BCM_COSQ_CLASSIFIER_FIELD   0x00000040 /* Classifier used in a field
                                                  processor rule. */

/* Initialize a bcm_cosq_classifier_t. */
extern void bcm_cosq_classifier_t_init(
    bcm_cosq_classifier_t *classifier);

#ifndef BCM_HIDE_DISPATCHABLE

/* Create a cosq classifier */
extern int bcm_cosq_classifier_create(
    int unit, 
    bcm_cosq_classifier_t *classifier, 
    int *classifier_id);

/* Destroy the cosq classifier */
extern int bcm_cosq_classifier_destroy(
    int unit, 
    int classifier_id);

/* Get info about a cosq classifier */
extern int bcm_cosq_classifier_get(
    int unit, 
    int classifier_id, 
    bcm_cosq_classifier_t *classifier);

/* 
 * Set the mapping from port, classifier, and internal priority to a COS
 * queue in a queue group.
 */
extern int bcm_cosq_classifier_mapping_set(
    int unit, 
    bcm_gport_t port, 
    int classifier_id, 
    bcm_gport_t queue_group, 
    bcm_cos_t priority, 
    bcm_cos_queue_t cosq);

/* 
 * Set the mapping from port, classifier, and multiple internal
 * priorities to multiple COS queues in a queue group.
 */
extern int bcm_cosq_classifier_mapping_multi_set(
    int unit, 
    bcm_gport_t port, 
    int classifier_id, 
    bcm_gport_t queue_group, 
    int array_count, 
    bcm_cos_t *priority_array, 
    bcm_cos_queue_t *cosq_array);

/* 
 * Get the mapping from port, classifier, and internal priority to a COS
 * queue in a queue group.
 */
extern int bcm_cosq_classifier_mapping_get(
    int unit, 
    bcm_gport_t port, 
    int classifier_id, 
    bcm_gport_t *queue_group, 
    bcm_cos_t priority, 
    bcm_cos_queue_t *cosq);

/* 
 * Get the mapping from port, classifier, and multiple internal
 * priorities to multiple COS queues in a queue group.
 */
extern int bcm_cosq_classifier_mapping_multi_get(
    int unit, 
    bcm_gport_t port, 
    int classifier_id, 
    bcm_gport_t *queue_group, 
    int array_max, 
    bcm_cos_t *priority_array, 
    bcm_cos_queue_t *cosq_array, 
    int *array_count);

/* 
 * Clear the mapping from port, classifier, and internal priorities to
 * COS queues in a queue group.
 */
extern int bcm_cosq_classifier_mapping_clear(
    int unit, 
    bcm_gport_t port, 
    int classifier_id);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Config parameters for Priority flow control */
typedef struct bcm_cosq_qcn_config_s {
    int size;                           /* Set point for queue. In Bytes. */
    int weight;                         /* Weight to be given to change in queue
                                           length. */
    int nbr_samples;                    /* Number of valid samples. */
    int sample_bytes[BCM_COS_COUNT]; 
    int max_feedback;                   /* Maximum value of congestion feedback. */
    int quantization;                   /* Quantization value. */
    int randomize_sample_threshold;     /* Random sample threshold - true/false. */
} bcm_cosq_qcn_config_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* Set the configuration of a congestion managed queue parameters. */
extern int bcm_cosq_qcn_config_set(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_qcn_config_t *config);

/* Get the configuration of a congestion managed queue parameters. */
extern int bcm_cosq_qcn_config_get(
    int unit, 
    bcm_gport_t port, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_cosq_qcn_config_t *config);

/* Set the credit worth size per module-ID. */
extern int bcm_cosq_dest_credit_size_set(
    int unit, 
    bcm_module_t dest_modid, 
    uint32 credit_size);

/* Get the credit worth size per module-ID. */
extern int bcm_cosq_dest_credit_size_get(
    int unit, 
    bcm_module_t dest_modid, 
    uint32 *credit_size);

/* To enable/disable Rx of packets on the specified CPU cosq. */
extern int bcm_cosq_cpu_cosq_enable_set(
    int unit, 
    bcm_cos_queue_t cosq, 
    int enable);

/* 
 * To get enable/disable status on Rx of packets on the specified CPU
 * cosq.
 */
extern int bcm_cosq_cpu_cosq_enable_get(
    int unit, 
    bcm_cos_queue_t cosq, 
    int *enable);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Alpha value for dynamic threshold */
typedef enum bcm_cosq_control_drop_limit_alpha_value_e {
    bcmCosqControlDropLimitAlpha_1_64 = 0, /* Use 1/64 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1_32 = 1, /* Use 1/32 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1_16 = 2, /* Use 1/16 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1_8 = 3, /* Use 1/8 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1_4 = 4, /* Use 1/4 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1_2 = 5, /* Use 1/2 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_1 = 6, /* Use 1 as the alpha value for dynamic
                                           threshold */
    bcmCosqControlDropLimitAlpha_2 = 7, /* Use 2 as the alpha value for dynamic
                                           threshold */
    bcmCosqControlDropLimitAlpha_4 = 8, /* Use 4 as the alpha value for dynamic
                                           threshold */
    bcmCosqControlDropLimitAlpha_1_128 = 9, /* Use 1/128 as the alpha value for
                                           dynamic threshold */
    bcmCosqControlDropLimitAlpha_8 = 10, /* Use 8 as the alpha value for dynamic
                                           threshold */
    bcmCosqControlDropLimitAlphaCount = 11 /* Must be the last entry! */
} bcm_cosq_control_drop_limit_alpha_value_t;

#ifndef BCM_HIDE_DISPATCHABLE

/* Clear the profile for tracking. */
extern int bcm_cosq_bst_stat_clear(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_bst_stat_id_t bid);

/* Extract per-BST-Resource statistics from the HW counters. */
extern int bcm_cosq_bst_stat_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_bst_stat_id_t bid, 
    uint32 options, 
    uint64 *value);

/* Extract per-BST-Resource statistics from the HW counters. */
extern int bcm_cosq_bst_stat_get32(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    bcm_bst_stat_id_t bid, 
    uint32 options, 
    uint32 *value);

/* Get 64-bits counter value for multiple BST statistic types. */
extern int bcm_cosq_bst_stat_multi_get(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 options, 
    int max_values, 
    bcm_bst_stat_id_t *id_list, 
    uint64 *values);

/* Get 32-bits counter value for multiple BST statistic types. */
extern int bcm_cosq_bst_stat_multi_get32(
    int unit, 
    bcm_gport_t gport, 
    bcm_cos_queue_t cosq, 
    uint32 options, 
    int max_values, 
    bcm_bst_stat_id_t *id_list, 
    uint32 *values);

#endif /* BCM_HIDE_DISPATCHABLE */

/* Service pool types. */
typedef enum bcm_cosq_service_pool_type_e {
    bcmCosqServicePoolPortColorAware = 0, /* Port service pool level color aware */
    bcmCosqServicePoolColorAware = 1,   /* Pool level color aware */
    bcmCosqServicePoolQueueCongestionAware = 2, /* Pool level queue congeston status
                                           aware */
    bcmCosqServicePoolTypeCount = 3     /* Must be the last entry! */
} bcm_cosq_service_pool_type_t;

/* This structure has everything about service pool. */
typedef struct bcm_cosq_service_pool_s {
    bcm_cosq_service_pool_type_t type;  /* Service pool type. */
    int enabled;                        /* Enable or disable. */
} bcm_cosq_service_pool_t;

#ifndef BCM_HIDE_DISPATCHABLE

extern int bcm_cosq_service_pool_set(
    int unit, 
    bcm_service_pool_id_t id, 
    bcm_cosq_service_pool_t cosq_service_pool);

extern int bcm_cosq_service_pool_get(
    int unit, 
    bcm_service_pool_id_t id, 
    bcm_cosq_service_pool_t *cosq_service_pool);

extern int bcm_cosq_gport_reattach(
    int unit, 
    bcm_gport_t sched_port, 
    bcm_gport_t input_port, 
    bcm_cos_queue_t cosq);

extern int bcm_cosq_profile_mapping_set(
    int unit, 
    bcm_gport_t gport_to_map, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_switch_profile_mapping_t *profile_mapping);

extern int bcm_cosq_profile_mapping_get(
    int unit, 
    bcm_gport_t gport_to_map, 
    bcm_cos_queue_t cosq, 
    uint32 flags, 
    bcm_switch_profile_mapping_t *profile_mapping);

#endif /* BCM_HIDE_DISPATCHABLE */

#endif /* __BCM_COSQ_H__ */
